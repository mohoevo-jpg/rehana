import{B as _,r as p,c as r,b as e,d as k,F as B,m as C,k as g,t as a,e as u,v as x,o as d}from"./index-DUS2SrFg.js";import{u as S}from"./branches-C78i2SSd.js";import{f as V}from"./currency-DPHm-HqN.js";const j={class:"space-y-6"},M={class:"flex justify-between items-center"},U={class:"bg-white shadow overflow-hidden sm:rounded-lg"},$={class:"min-w-full divide-y divide-gray-200"},D={class:"bg-white divide-y divide-gray-200"},E={class:"px-6 py-4 whitespace-nowrap"},F={class:"text-sm font-medium text-gray-900"},N={class:"px-6 py-4 whitespace-nowrap"},z={class:"text-sm text-gray-500"},I={class:"px-6 py-4 whitespace-nowrap"},L={class:"text-sm text-gray-500"},T={class:"px-6 py-4 whitespace-nowrap"},q={class:"text-sm font-semibold text-green-600"},A={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},G=["onClick"],H=["onClick"],J={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},K={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},O={class:"inline-block align-bottom bg-white rounded-lg text-right overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},P={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Q={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},R={class:"mt-4 space-y-4"},ee={__name:"Branches",setup(W){const n=S(),h=_(),f=l=>h.sales.filter(t=>t.branchId===l).reduce((t,s)=>t+s.total,0),m=p(!1),i=p(!1),o=p({id:null,name:"",location:"",phone:""}),y=(l=null)=>{l?(i.value=!0,o.value={...l}):(i.value=!1,o.value={id:null,name:"",location:"",phone:""}),m.value=!0},c=()=>{m.value=!1},v=()=>{i.value?n.updateBranch(o.value):n.addBranch(o.value),c()},b=l=>{confirm("هل أنت متأكد من حذف هذا الفرع؟")&&n.deleteBranch(l)};return(l,t)=>(d(),r("div",j,[e("div",M,[t[4]||(t[4]=e("h2",{class:"text-2xl font-bold text-gray-900"},"إدارة الفروع",-1)),e("button",{onClick:t[0]||(t[0]=s=>y()),class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700"}," إضافة فرع جديد ")]),e("div",U,[e("table",$,[t[5]||(t[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," اسم الفرع "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الموقع "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," رقم الهاتف "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," المبيعات "),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"إجراءات")])])],-1)),e("tbody",D,[(d(!0),r(B,null,C(g(n).branches,s=>(d(),r("tr",{key:s.id},[e("td",E,[e("div",F,a(s.name),1)]),e("td",N,[e("div",z,a(s.location),1)]),e("td",I,[e("div",L,a(s.phone),1)]),e("td",T,[e("div",q,a(g(V)(f(s.id))),1)]),e("td",A,[e("button",{onClick:w=>y(s),class:"text-primary-600 hover:text-primary-900 ml-4"},"تعديل",8,G),e("button",{onClick:w=>b(s.id),class:"text-red-600 hover:text-red-900"},"حذف",8,H)])]))),128))])])]),m.value?(d(),r("div",J,[e("div",K,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:c}),t[9]||(t[9]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",O,[e("div",P,[e("h3",Q,a(i.value?"تعديل فرع":"إضافة فرع جديد"),1),e("div",R,[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700"},"اسم الفرع",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.name=s),type:"text",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},null,512),[[x,o.value.name]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700"},"الموقع",-1)),u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.location=s),type:"text",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},null,512),[[x,o.value.location]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700"},"رقم الهاتف",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.phone=s),type:"text",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},null,512),[[x,o.value.phone]])])])]),e("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[e("button",{onClick:v,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"}," حفظ "),e("button",{onClick:c,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," إلغاء ")])])])])):k("",!0)]))}};export{ee as default};
