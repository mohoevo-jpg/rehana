import{x as C,g as u,h as j,c as n,b as e,j as p,G as O,k as i,t as s,n as x,F as g,m as y,o,d as _}from"./index-DUS2SrFg.js";import{f as b}from"./currency-DPHm-HqN.js";import{G as S}from"./globe-DTUJ4iLc.js";import{R as I}from"./refresh-cw-DZcBzaAy.js";import{c as N}from"./createLucideIcon-Dlap17QE.js";/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=N("InboxIcon",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),V={class:"h-full flex flex-col space-y-4"},$={class:"flex justify-between items-center"},B={class:"text-2xl font-bold text-gray-900 flex items-center gap-2"},D={class:"flex gap-2"},G={class:"flex-1 bg-white rounded-lg shadow overflow-hidden flex flex-col"},M={key:0,class:"flex-1 flex flex-col items-center justify-center text-gray-400"},R={key:1,class:"flex-1 overflow-y-auto"},q={class:"divide-y divide-gray-200"},z={class:"flex justify-between items-start mb-2"},A={class:"flex items-center gap-2"},F={class:"font-bold text-lg"},E={class:"text-sm text-gray-500 mt-1"},H={class:"text-left"},P={class:"font-bold text-lg text-primary-600"},Q={class:"text-xs text-gray-500"},T={class:"bg-gray-50 rounded p-3 mb-3 text-sm"},J={key:0,class:"flex justify-end gap-2"},K=["onClick"],U=["onClick"],W={key:1,class:"flex justify-end gap-2"},X=["onClick"],oe={__name:"OnlineOrders",setup(Y){const a=C(),m=u(()=>a.orders),f=u(()=>a.isConnected),h=u(()=>a.newOrdersCount);j(()=>{a.initSocket(),a.markAsRead()});const r=(l,c)=>{a.updateOrderStatus(l,c)},v=l=>({pending:"قيد الانتظار",accepted:"قيد التجهيز",rejected:"مرفوض",completed:"مكتمل"})[l]||l,k=l=>new Date(l).toLocaleString("ar-IQ");return(l,c)=>(o(),n("div",V,[e("div",$,[e("h2",B,[p(i(S),{class:"w-8 h-8 text-primary-600"}),O(" الطلبات الواردة ("+s(h.value)+") ",1)]),e("div",D,[e("span",{class:x(["px-3 py-1 rounded-full text-sm font-medium",f.value?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},s(f.value?"متصل بالخادم":"غير متصل"),3),e("button",{onClick:c[0]||(c[0]=t=>i(a).fetchOrders()),class:"p-2 hover:bg-gray-100 rounded-full"},[p(i(I),{class:"w-5 h-5"})])])]),e("div",G,[m.value.length===0?(o(),n("div",M,[p(i(L),{class:"w-16 h-16 mb-4 opacity-50"}),c[1]||(c[1]=e("p",null,"لا توجد طلبات جديدة",-1))])):(o(),n("div",R,[e("div",q,[(o(!0),n(g,null,y(m.value,t=>(o(),n("div",{key:t.id,class:x(["p-4 hover:bg-gray-50 transition-colors",{"bg-primary-50":t.status==="pending"}])},[e("div",z,[e("div",null,[e("div",A,[e("span",F,"#"+s(t.id.slice(-6)),1),e("span",{class:x(["px-2 py-0.5 text-xs rounded-full",{"bg-yellow-100 text-yellow-800":t.status==="pending","bg-blue-100 text-blue-800":t.status==="accepted","bg-red-100 text-red-800":t.status==="rejected","bg-green-100 text-green-800":t.status==="completed"}])},s(v(t.status)),3)]),e("div",E,s(k(t.date))+" • "+s(t.customerName)+" ("+s(t.customerPhone)+") ",1)]),e("div",H,[e("div",P,s(i(b)(t.total)),1),e("div",Q,s(t.paymentMethod==="cash"?"الدفع عند الاستلام":"دفع إلكتروني"),1)])]),e("div",T,[(o(!0),n(g,null,y(t.items,(d,w)=>(o(),n("div",{key:w,class:"flex justify-between py-1 border-b border-gray-200 last:border-0"},[e("span",null,s(d.name)+" × "+s(d.quantity),1),e("span",null,s(i(b)(d.price*d.quantity)),1)]))),128))]),t.status==="pending"?(o(),n("div",J,[e("button",{onClick:d=>r(t.id,"rejected"),class:"px-4 py-2 bg-white border border-red-300 text-red-700 rounded hover:bg-red-50 text-sm font-medium"}," رفض الطلب ",8,K),e("button",{onClick:d=>r(t.id,"accepted"),class:"px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700 text-sm font-medium"}," قبول وتجهيز ",8,U)])):_("",!0),t.status==="accepted"?(o(),n("div",W,[e("button",{onClick:d=>r(t.id,"completed"),class:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm font-medium"}," إكمال وتسليم ",8,X)])):_("",!0)],2))),128))])]))])]))}};export{oe as default};
