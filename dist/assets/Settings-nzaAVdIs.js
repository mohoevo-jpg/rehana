import{c as r,o,b as e,d,L as N,t as n,F as $,m as j,G as b,r as x,h as ke,E as Y,n as P,K as Le,M as ot,J as rt,l as nt,i as Se,N as Ve,g as re,j as g,k as i,e as u,H as V,O as A,v as p,p as I,a as it,P as Ie,Q as L,q as dt}from"./index-DUS2SrFg.js";import{J as ut}from"./JsBarcode-Bw_ynkXT.js";import{R as mt}from"./ReportPreviewModal-DkvWyncV.js";import{_ as Fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as ct,a as pt}from"./store-M-edT6Yy.js";import{c as S}from"./createLucideIcon-Dlap17QE.js";import{U as Pe,S as ge,A as gt}from"./users-Cpt_42Sy.js";import{P as Ae}from"./printer-CBd1wSWY.js";import{F as vt}from"./file-text-C5kbrT4y.js";import{R as F}from"./refresh-cw-DZcBzaAy.js";import{P as $e}from"./plus-T6ifTBuq.js";import{G as je}from"./globe-DTUJ4iLc.js";import{M as Me}from"./message-circle-Db_nYIl_.js";import{P as ve}from"./pen-square-BZijlLpx.js";import{T as xe}from"./trash-2-DjMAfoaB.js";/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=S("CheckCircleIcon",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=S("DownloadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=S("GiftIcon",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=S("PaletteIcon",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=S("PlayIcon",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=S("SaveIcon",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=S("ScanBarcodeIcon",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=S("ServerIcon",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=S("ShieldCheckIcon",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=S("TerminalIcon",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=S("VideoIcon",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=S("WifiIcon",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-vue-next v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=S("XCircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ut={class:"text-center mb-4"},Ct={key:0,class:"mb-2 flex justify-center"},St=["src"],Vt={key:1,class:"font-bold border-2 border-black inline-block p-1 px-3",style:{"border-color":"#000000"}},It={class:"text-gray-600 mb-1",style:{color:"#4b5563"}},Pt={class:"text-gray-600",style:{color:"#4b5563"}},At={key:1,class:"font-medium mt-1"},$t={class:"mb-3 space-y-1"},jt={key:0,class:"flex justify-between"},Mt={key:1,class:"flex justify-between"},Lt={key:2,class:"flex justify-between"},Ft={class:"w-full border-collapse mb-4"},zt={class:"py-1 border-b border-gray-200"},Tt={class:"text-center py-1 border-b border-gray-200"},Dt={class:"text-left py-1 border-b border-gray-200"},qt={class:"text-left py-1 border-b border-gray-200"},Bt={class:"mt-4 border-t-2 border-black pt-2",style:{"border-color":"#000000"}},Nt={class:"mt-6 text-center"},Ot={key:0,class:"mb-3 border-b border-dashed border-black pb-2 space-y-1",style:{"border-color":"#000000"}},Ht={key:0,dir:"ltr",class:"flex justify-center gap-1 items-center"},Et={key:1,dir:"ltr",class:"flex justify-center gap-1 items-center"},Rt={key:2,dir:"ltr",class:"flex justify-center gap-1 items-center"},Wt={key:3,dir:"ltr",class:"flex justify-center gap-1 items-center"},Gt={key:4},Qt={key:1,class:"text-gray-600",style:{color:"#4b5563"}},Jt={__name:"InvoicePreview",props:{settings:{type:Object,required:!0},width:{type:String,default:"80mm"}},setup(v){const c=[{id:1,name:"منتج 1",quantity:2,price:"10,000",total:"20,000"},{id:2,name:"منتج 2",quantity:1,price:"25,000",total:"25,000"},{id:3,name:"منتج 3",quantity:3,price:"5,000",total:"15,000"}];return(U,m)=>(o(),r("div",{class:"invoice-preview bg-white text-black p-4 mx-auto shadow-lg box-border",style:N({width:v.settings.invoicePaperSize||"80mm",minHeight:"100mm",fontFamily:"Arial, sans-serif",direction:"rtl",color:"#000000",backgroundColor:"#ffffff",fontSize:(v.settings.invoiceFontSize||12)+"px"})},[e("div",Ut,[v.settings.showLogoOnInvoice?(o(),r("div",Ct,[v.settings.invoiceLogoUrl?(o(),r("img",{key:0,src:v.settings.invoiceLogoUrl,class:"max-w-[80%] max-h-[100px] object-contain mx-auto"},null,8,St)):(o(),r("div",Vt,"LOGO"))])):d("",!0),e("h2",{class:"m-0 font-bold mb-1",style:N({fontSize:(v.settings.invoiceFontSize||12)+4+"px"})},n(v.settings.shopName||"اسم المتجر"),5),e("p",It,n(v.settings.address||"العنوان"),1),e("p",Pt,n(v.settings.phone||"07700000000"),1),v.settings.invoiceHeader?(o(),r("p",At,n(v.settings.invoiceHeader),1)):d("",!0),e("h3",{class:"mt-2 border-t border-dashed border-black pt-2 font-bold",style:N({fontSize:(v.settings.invoiceFontSize||12)+2+"px",borderColor:"#000000"})},"فاتورة #12345",4)]),e("div",$t,[m[2]||(m[2]=e("div",{class:"flex justify-between"},[e("span",null,"رقم الفاتورة: #12345")],-1)),v.settings.showDate!==!1?(o(),r("div",jt,[e("span",null,"التاريخ: "+n(new Date().toLocaleDateString("ar-IQ")),1)])):d("",!0),v.settings.showCashierName?(o(),r("div",Mt,[...m[0]||(m[0]=[e("span",null,"الكاشير: محمد",-1)])])):d("",!0),v.settings.showCustomerInfo?(o(),r("div",Lt,[...m[1]||(m[1]=[e("span",null,"العميل: عميل نقدي",-1)])])):d("",!0)]),e("table",Ft,[m[3]||(m[3]=e("thead",null,[e("tr",null,[e("th",{class:"text-right border-b-2 border-black py-1",style:{"border-color":"#000000"}},"المنتج"),e("th",{class:"text-center border-b-2 border-black py-1",style:{"border-color":"#000000"}},"الكمية"),e("th",{class:"text-left border-b-2 border-black py-1",style:{"border-color":"#000000"}},"السعر"),e("th",{class:"text-left border-b-2 border-black py-1",style:{"border-color":"#000000"}},"المجموع")])],-1)),e("tbody",null,[(o(),r($,null,j(c,w=>e("tr",{key:w.id},[e("td",zt,n(w.name),1),e("td",Tt,n(w.quantity),1),e("td",Dt,n(w.price),1),e("td",qt,n(w.total),1)])),64))])]),e("div",Bt,[m[5]||(m[5]=e("div",{class:"flex justify-between mb-1"},[e("span",null,"المجموع:"),e("span",null,"60,000")],-1)),m[6]||(m[6]=e("div",{class:"flex justify-between mb-1 text-gray-600",style:{color:"#4b5563"}},[e("span",null,"الخصم:"),e("span",null,"0")],-1)),e("div",{class:"flex justify-between font-bold mt-2 border-t border-dashed border-black pt-2",style:N({fontSize:(v.settings.invoiceFontSize||12)+4+"px",borderColor:"#000000"})},[...m[4]||(m[4]=[e("span",null,"الاجمالي:",-1),e("span",null,"60,000 د.ع",-1)])],4)]),e("div",Nt,[v.settings.showSocialMediaOnInvoice?(o(),r("div",Ot,[v.settings.facebookUrl?(o(),r("div",Ht,[e("span",null,n(v.settings.facebookUrl),1),m[7]||(m[7]=b()),m[8]||(m[8]=e("span",{class:"font-bold"},":Fb",-1))])):d("",!0),v.settings.instagramUrl?(o(),r("div",Et,[e("span",null,n(v.settings.instagramUrl),1),m[9]||(m[9]=b()),m[10]||(m[10]=e("span",{class:"font-bold"},":Insta",-1))])):d("",!0),v.settings.telegramUrl?(o(),r("div",Rt,[e("span",null,n(v.settings.telegramUrl),1),m[11]||(m[11]=b()),m[12]||(m[12]=e("span",{class:"font-bold"},":Tele",-1))])):d("",!0),v.settings.websiteUrl?(o(),r("div",Wt,[e("span",null,n(v.settings.websiteUrl),1),m[13]||(m[13]=b()),m[14]||(m[14]=e("span",{class:"font-bold"},":Web",-1))])):d("",!0),v.settings.email?(o(),r("div",Gt,n(v.settings.email),1)):d("",!0)])):d("",!0),v.settings.invoiceFooter?(o(),r("p",Qt,n(v.settings.invoiceFooter),1)):d("",!0)])],4))}},Kt=Fe(Jt,[["__scopeId","data-v-7b26d6d0"]]),Xt={class:"barcode-preview-container flex flex-col items-center justify-center p-4 rounded bg-white border border-gray-300 w-full min-h-[200px]"},Zt={key:0,class:"text-gray-400 animate-pulse mb-4"},Yt={key:1,class:"mt-4 p-3 bg-red-50 text-red-600 rounded text-sm w-full text-center border border-red-200"},es={__name:"BarcodePreview",props:{settings:{type:Object,required:!0,default:()=>({})},value:{type:String,default:"1234567890"}},setup(v){const c=v,U=x(null),m=x(""),w=x(!0),O=async()=>{if(w.value=!0,m.value="",await Le(),!!U.value)try{const D=(c.settings.barcodeFormat||"CODE128").trim()||"CODE128",H=Math.max(1,Number(c.settings.barcodeWidth)||2),M=Math.max(30,Number(c.settings.barcodeHeight)||100),E=Math.max(10,Number(c.settings.barcodeFontSize)||20),R=Number(c.settings.barcodeMargin)>=0?Number(c.settings.barcodeMargin):10,z=c.settings.barcodeShowText!==!1;U.value.innerHTML="",ut(U.value,c.value||"1234567890",{format:D,lineColor:"#000000",width:H,height:M,displayValue:z,fontSize:E,textMargin:2,margin:R,background:"#ffffff",valid:q=>{q||(m.value="تنسيق الباركود غير صالح للبيانات المدخلة"),w.value=!1}}),m.value||(w.value=!1)}catch(D){console.error("Barcode render error:",D),m.value="فشل في إنشاء الباركود: "+(D.message||"خطأ غير معروف"),w.value=!1}};return ke(()=>{O(),setTimeout(O,200)}),Y(()=>c.settings,()=>{O()},{deep:!0}),Y(()=>c.value,()=>{O()}),(D,H)=>(o(),r("div",Xt,[w.value?(o(),r("div",Zt," جاري تحميل الباركود... ")):d("",!0),(o(),r("svg",{ref_key:"barcodeRef",ref:U,class:P(["max-w-full transition-opacity duration-300",{"opacity-100":!w.value&&!m.value,"opacity-0":w.value||m.value}])},null,2)),m.value?(o(),r("div",Yt,[H[0]||(H[0]=e("p",{class:"font-bold mb-1"},"عذراً، حدث خطأ:",-1)),b(" "+n(m.value),1)])):d("",!0)]))}},ts={class:"h-full flex flex-col space-y-4"},ss={class:"text-2xl font-bold text-gray-900 dark:text-white px-2"},ls={class:"flex-1 bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden flex flex-col md:flex-row"},as={class:"w-full md:w-64 bg-gray-50 dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 flex flex-row md:flex-col overflow-x-auto md:overflow-visible"},os=["onClick"],rs={class:"flex-1 p-6 overflow-y-auto"},ns={key:0,class:"space-y-6 max-w-2xl animate-fade-in"},is={class:"space-y-6"},ds={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},us={class:"flex items-start gap-3"},ms={class:"space-y-4"},cs={class:"flex items-center justify-between"},ps={class:"relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in"},gs={key:0,class:"space-y-4 border-t pt-4"},vs={class:"flex gap-2"},xs=["value"],ys={class:"bg-gray-100 p-4 rounded-lg flex flex-col items-center justify-center min-h-[200px]"},bs={class:"flex justify-end pt-4"},fs={key:1,class:"space-y-6 max-w-2xl animate-fade-in"},ks={class:"text-lg font-medium text-gray-900 dark:text-white border-b dark:border-gray-700 pb-2 mb-4"},ws={class:"grid grid-cols-1 gap-6"},hs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},_s={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Us={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Cs={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ss={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Vs={class:"border-t pt-4 mt-4"},Is={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ps={key:2,class:"space-y-6 max-w-2xl animate-fade-in"},As={class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg p-6 space-y-6"},$s={class:"flex items-center justify-between"},js={key:0,class:"flex items-center gap-2"},Ms={key:0,class:"space-y-4 animate-fade-in pt-4 border-t"},Ls={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Fs={class:"bg-blue-50 p-4 rounded-lg border border-blue-100 flex items-start gap-3"},zs={class:"text-sm text-blue-700 mt-1"},Ts={class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg p-6 space-y-6"},Ds={class:"space-y-4 animate-fade-in pt-4 border-t"},qs={class:"bg-green-50 p-4 rounded-lg border border-green-100 flex items-start gap-3"},Bs={class:"text-sm text-green-700 mt-1 whitespace-pre-wrap"},Ns={class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg p-6 space-y-6"},Os={class:"flex items-center justify-between border-b pb-4"},Hs={class:"space-y-4"},Es={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert"},Rs={class:"block sm:inline"},Ws={class:"flex justify-between items-start"},Gs={class:"font-bold text-gray-900 dark:text-white flex items-center gap-2"},Qs={key:0,class:"px-2 py-0.5 text-xs rounded-full bg-green-100 text-green-800 flex items-center gap-1"},Js={key:1,class:"px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-800"},Ks={class:"text-sm text-gray-600 dark:text-gray-300 mt-1"},Xs={class:"flex gap-4 mt-2 text-xs text-gray-500"},Zs={key:0,class:"flex items-center gap-1 text-green-600 font-bold"},Ys={key:1,class:"flex items-center gap-1 text-blue-600 font-bold"},el={class:"flex items-center gap-1"},tl={key:2,class:"flex items-center gap-1"},sl={class:"flex items-center gap-2"},ll=["onClick"],al=["onClick"],ol=["onClick"],rl={key:1,class:"text-center py-8 text-gray-500 text-sm"},nl={key:3,class:"space-y-6 max-w-2xl animate-fade-in"},il={class:"text-lg font-medium text-gray-900 dark:text-white border-b dark:border-gray-700 pb-2 mb-4"},dl={class:"space-y-4"},ul={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ml={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},cl={class:"grid grid-cols-2 gap-4"},pl={class:"pt-4"},gl={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},vl={class:"flex gap-4"},xl=["onClick","title"],yl={class:"pt-4 flex items-center justify-between"},bl={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},fl={key:4,class:"space-y-6 animate-fade-in"},kl={class:"flex justify-between items-center border-b pb-4"},wl={class:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700 overflow-hidden"},hl={class:"min-w-full divide-y divide-gray-200"},_l={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ul={class:"px-6 py-4 whitespace-nowrap"},Cl={class:"flex items-center"},Sl={class:"h-10 w-10 flex-shrink-0"},Vl={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center text-primary-600 font-bold"},Il={class:"mr-4"},Pl={class:"text-sm font-medium text-gray-900 dark:text-white"},Al={class:"text-sm text-gray-500 dark:text-gray-400"},$l={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},jl={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white font-bold"},Ml={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ll={class:"flex items-center gap-2"},Fl=["onClick"],zl=["onClick"],Tl={key:0},Dl={key:5,class:"space-y-6 animate-fade-in"},ql={class:"flex justify-between items-center border-b pb-4"},Bl={class:"bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700 overflow-hidden"},Nl={class:"min-w-full divide-y divide-gray-200"},Ol={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Hl={class:"px-6 py-4 whitespace-nowrap"},El={class:"flex items-center"},Rl={class:"h-10 w-10 flex-shrink-0"},Wl={class:"h-10 w-10 rounded-full bg-gray-100 flex items-center justify-center text-gray-600 font-bold"},Gl={class:"mr-4"},Ql={class:"text-sm font-medium text-gray-900 dark:text-white"},Jl={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Kl={class:"flex flex-col"},Xl={class:"text-xs"},Zl={class:"px-6 py-4 whitespace-nowrap"},Yl={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"},ea={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ta={class:"flex items-center gap-2"},sa=["onClick"],la=["onClick"],aa={key:6,class:"space-y-6 animate-fade-in"},oa={class:"text-lg font-medium text-gray-900 dark:text-white border-b dark:border-gray-700 pb-2 mb-4"},ra={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},na={class:"space-y-4"},ia={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},da={value:null},ua={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ma={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},ca={class:"border-t pt-4 mt-4 space-y-4"},pa={class:"flex items-center gap-4"},ga={key:0,class:"w-16 h-16 border rounded p-1 flex items-center justify-center bg-gray-50"},va=["src"],xa={class:"flex-1"},ya={class:"grid grid-cols-2 gap-4"},ba={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},fa={class:"space-y-2"},ka={class:"flex items-center gap-2"},wa={for:"showLogo",class:"text-sm text-gray-700"},ha={class:"flex items-center gap-2"},_a={class:"flex items-center gap-2"},Ua={class:"flex items-center gap-2"},Ca={class:"pt-4"},Sa={class:"btn-secondary w-full sm:w-auto"},Va={class:"bg-gray-200 p-6 rounded-lg flex flex-col items-center justify-center min-h-[500px]"},Ia={class:"transform scale-95 sm:scale-100 transition-transform"},Pa={key:7,class:"space-y-6 max-w-2xl animate-fade-in"},Aa={class:"space-y-4"},$a={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ja={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Ma={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},La={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Fa={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},za={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ta={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Da={class:"flex items-center gap-2 mt-8"},qa={class:"mt-8 p-6 border rounded-lg bg-gray-50 flex flex-col items-center justify-center"},Ba={key:8,class:"space-y-6 max-w-2xl animate-fade-in"},Na={class:"space-y-6"},Oa={class:"space-y-4"},Ha={class:"space-y-4"},Ea={class:"flex gap-4"},Ra=["onClick"],Wa={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Ga={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Qa={class:"space-y-4"},Ja={class:"space-y-2"},Ka={class:"flex items-center gap-2"},Xa={class:"flex items-center gap-2"},Za={class:"pt-4"},Ya={key:9,class:"space-y-6 max-w-2xl animate-fade-in"},eo={class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg p-6 flex flex-col items-center text-center space-y-4"},to={class:"w-16 h-16 bg-primary-50 rounded-full flex items-center justify-center text-primary-600 mb-2"},so={class:"text-lg font-bold text-gray-900 dark:text-white"},lo={key:0,class:"text-gray-500 mt-1"},ao={key:1,class:"text-gray-500 mt-1"},oo={key:2,class:"text-green-600 mt-1"},ro={key:3,class:"text-primary-600 mt-1 font-medium"},no={key:4,class:"text-primary-600 mt-1"},io={key:5,class:"text-green-600 mt-1 font-bold"},uo={key:6,class:"text-red-600 mt-1"},mo={key:0,class:"w-full max-w-md bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 mt-4"},co={class:"pt-4 flex gap-4"},po=["disabled"],go={class:"w-full mt-6 border-t pt-4"},vo={key:0,class:"mt-2 animate-fade-in"},xo={class:"flex gap-2"},yo={class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg p-6 space-y-4 mt-6"},bo={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fo={class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg p-6 space-y-4 mt-6"},ko={key:0,class:"flex items-center gap-2 mb-4"},wo={key:1,class:"space-y-4 animate-fade-in"},ho={key:10,class:"space-y-6 animate-fade-in"},_o={class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg p-6 mb-6"},Uo={class:"text-base font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},Co={class:"flex items-center gap-4 mb-4"},So={class:"relative flex h-3 w-3"},Vo={key:0,class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"},Io={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Po={class:"space-y-6"},Ao={class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg p-6 space-y-4"},$o={class:"flex items-center justify-between"},jo={class:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2"},Mo={class:"flex gap-4 pt-2"},Lo=["disabled"],Fo=["disabled"],zo={key:0,class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg p-6 space-y-4"},To={class:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2 border-b pb-2"},Do={class:"space-y-3"},qo={class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700"},Bo={class:"flex items-center gap-3"},No={class:"text-xs text-gray-500 font-mono"},Oo={class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700"},Ho={class:"flex items-center gap-3"},Eo={class:"text-xs text-gray-500 font-mono"},Ro={class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700"},Wo={class:"flex items-center gap-3"},Go={class:"text-xs text-gray-500 font-mono"},Qo={key:1,class:"bg-white dark:bg-gray-800 border dark:border-gray-700 rounded-lg p-6 space-y-4"},Jo={class:"text-base font-bold text-gray-900 dark:text-white flex items-center gap-2 border-b pb-2"},Ko={key:0,class:"text-center py-4"},Xo={class:"w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-3"},Zo=["disabled"],Yo={key:1,class:"text-center py-4"},er={class:"bg-white p-2 inline-block rounded-lg border mx-auto"},tr=["src"],sr={key:2,class:"text-center py-4"},lr={class:"w-16 h-16 bg-gray-100 text-gray-400 rounded-full flex items-center justify-center mx-auto mb-3"},ar={class:"bg-gray-900 text-gray-200 rounded-lg p-4 font-mono text-xs flex flex-col h-[500px]"},or={class:"flex justify-between items-center mb-2 border-b border-gray-700 pb-2"},rr={class:"flex items-center gap-2 font-bold text-green-400"},nr={class:"text-gray-500"},ir={class:"ml-2"},dr={key:0,class:"text-gray-600 italic text-center mt-10"},ur={key:11,class:"space-y-6 max-w-2xl animate-fade-in"},mr={class:"text-lg font-medium text-gray-900 dark:text-white border-b dark:border-gray-700 pb-2 mb-4"},cr={class:"space-y-6"},pr={class:"flex items-center justify-between"},gr={class:"text-sm font-medium text-gray-900 dark:text-white"},vr={class:"text-xs text-gray-500 dark:text-gray-400"},xr={class:"flex items-center justify-between"},yr={class:"text-sm font-medium text-gray-900 dark:text-white"},br={class:"text-xs text-gray-500 dark:text-gray-400"},fr={class:"pt-6 border-t"},kr={class:"btn-danger w-full sm:w-auto"},wr={class:"mt-2 text-xs text-red-500"},hr={class:"bg-gray-50 dark:bg-gray-900 p-4 border-t dark:border-gray-700 flex justify-end gap-3"},_r={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Ur={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Cr={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-right overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg w-full"},Sr={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Vr={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4",id:"modal-title"},Ir={class:"space-y-4"},Pr={class:"grid grid-cols-2 gap-4"},Ar={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},$r={key:0},jr={key:1},Mr={class:"bg-gray-50 dark:bg-gray-900 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Lr={key:1,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Fr={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},zr={class:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-right overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Tr={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Dr={class:"text-lg leading-6 font-medium text-gray-900 dark:text-white mb-4",id:"modal-title"},qr={class:"space-y-4"},Br={class:"flex gap-4 mb-4"},Nr={class:"flex items-center gap-2 cursor-pointer"},Or={class:"flex items-center gap-2 cursor-pointer"},Hr={class:"grid grid-cols-2 gap-4"},Er={key:0},Rr={key:0,class:"border rounded-md p-3 max-h-48 overflow-y-auto"},Wr=["value","checked","onChange"],Gr={class:"text-sm text-gray-700"},Qr={key:0,class:"text-sm text-gray-500 text-center"},Jr={key:1},Kr={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Xr={class:"bg-gray-50 dark:bg-gray-900 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Zr={__name:"Settings",setup(v){const{t:c}=ot(),U=rt(),m=x("livestream"),w=x(!1),O=x([]),D=x(!1),H=x(null),M=x({enabled:!1,deviceId:"",quality:"medium"}),E=x("disconnected"),R=x(null),z=x(!1),q=nt("/",{path:"/socket.io"}),W=x(q.connected);ke(()=>{ze(),q.on("connect",()=>{W.value=!0}),q.on("disconnect",()=>{W.value=!1}),q.on("whatsapp-status",a=>{E.value=a.status,R.value=a.qr||null,z.value=!1}),window.electronAPI&&(window.electronAPI.getAppVersion().then(a=>{ue.value=a}),window.electronAPI.getUpdateStatus().then(a=>{a&&(y.value=a.status,a.info&&(K.value=a.info),a.error&&(X.value=a.error))}),window.electronAPI.onUpdateStatus((a,t)=>{console.log("Update status:",a,t),y.value=a,a==="available"?K.value=t:a==="error"&&(X.value=t)}),window.electronAPI.onDownloadProgress(a=>{ee.value=Math.round(a.percent)}))}),Se(()=>{q.disconnect(),window.electronAPI&&window.electronAPI.removeUpdateListeners()});const ze=async()=>{try{const a=await Ve.getStatus();E.value=a.data.status,R.value=a.data.qr||null}catch(a){console.error("Failed to fetch WhatsApp status:",a)}},Te=async()=>{try{z.value=!0,await Ve.logout()}catch(a){console.error("Failed to logout WhatsApp:",a),z.value=!1}},de=x([]),G=x(!1),Q=x(null),h=x({name:"",phone:"",email:"",password:"",role:"customer",walletBalance:0}),l=x({...U.$state});l.value.announcement||(l.value.announcement={active:!1,title:"",message:""}),l.value.rewardSystem||(l.value.rewardSystem={active:!0,threshold:35e3,amount:1e3,message:""}),l.value.welcomeBonus===void 0&&(l.value.welcomeBonus=3e3),l.value.welcomeMessage===void 0&&(l.value.welcomeMessage="");const De=()=>{l.value.theme=l.value.theme==="dark"?"light":"dark"};Y(()=>l.value.theme,a=>{a==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},{immediate:!0});const ue=x("1.0.0"),y=x("idle"),K=x(null),ee=x(0),X=x(""),we=async()=>{y.value="checking",X.value="",window.electronAPI&&await window.electronAPI.checkForUpdate()},qe=async()=>{window.electronAPI&&await window.electronAPI.downloadUpdate()},Be=async()=>{window.electronAPI&&await window.electronAPI.quitAndInstall()},Ne=re(()=>[{id:"general",name:c("settings.general_section.title"),icon:ct},{id:"appearance",name:c("settings.appearance_section.title"),icon:xt},{id:"rewards",name:"نظام المكافآت",icon:ie},{id:"app_users",name:"مستخدمين التطبيق",icon:Pe},{id:"cashier_users",name:"مستخدمين الكاشير",icon:kt},{id:"invoices",name:c("settings.invoices_section.title"),icon:Ae},{id:"barcode",name:"الباركود",icon:ft},{id:"reports",name:"التقارير",icon:vt},{id:"updates",name:"التحديثات",icon:ye},{id:"server",name:"إدارة السيرفر",icon:be},{id:"system",name:c("settings.system_section.title"),icon:ge}]),te=re(()=>de.value.filter(a=>a.role==="customer")),Oe=re(()=>de.value.filter(a=>a.role==="admin"||a.role==="cashier")),se=async()=>{try{const a=await L.get("/users");de.value=a.data}catch(a){console.error("Failed to fetch users:",a)}},He=a=>{Q.value=null,h.value={name:"",phone:"",email:"",password:"",role:a,walletBalance:0},G.value=!0},he=a=>{Q.value=a,h.value={...a,password:""},G.value=!0},Ee=async()=>{var a,t;try{const k={...h.value};k.password||delete k.password,Q.value?await L.put(`/users/${Q.value.id}`,k):await L.post("/users",k),await se(),G.value=!1,alert("تم الحفظ بنجاح")}catch(k){alert(((t=(a=k.response)==null?void 0:a.data)==null?void 0:t.error)||"حدث خطأ أثناء الحفظ")}},_e=async a=>{if(confirm("هل أنت متأكد من الحذف؟ لا يمكن التراجع عن هذا الإجراء."))try{await L.delete(`/users/${a}`),await se()}catch{alert("حدث خطأ أثناء الحذف")}},Re=[{id:1,name:"منتج تجريبي 1",quantity:5,price:"5,000 د.ع",total:"25,000 د.ع"},{id:2,name:"منتج تجريبي 2",quantity:2,price:"10,000 د.ع",total:"20,000 د.ع"},{id:3,name:"منتج تجريبي 3",quantity:1,price:"15,000 د.ع",total:"15,000 د.ع"}],We=[{key:"name",label:"المنتج"},{key:"quantity",label:"الكمية"},{key:"price",label:"السعر"},{key:"total",label:"الإجمالي"}],Ue=re(()=>[{name:c("settings.colors.sky"),value:"#0ea5e9"},{name:c("settings.colors.blue"),value:"#2563eb"},{name:c("settings.colors.violet"),value:"#7c3aed"},{name:c("settings.colors.pink"),value:"#db2777"},{name:c("settings.colors.red"),value:"#dc2626"},{name:c("settings.colors.orange"),value:"#ea580c"},{name:c("settings.colors.green"),value:"#16a34a"},{name:c("settings.colors.gray"),value:"#4b5563"}]),me=x([]),le=x(""),J=x(!1),Z=x(null),f=x({title:"",message:"",amount:0,type:"reward",targetType:"all",targetConfig:{userIds:[],limit:10}}),ae=async()=>{var a,t;le.value="";try{const k=await L.get("/campaigns");me.value=k.data}catch(k){console.error("Failed to fetch campaigns:",k),le.value="فشل تحميل الحملات: "+(((t=(a=k.response)==null?void 0:a.data)==null?void 0:t.error)||k.message||"خطأ غير معروف")}},Ge=()=>{Z.value=null,f.value={title:"",message:"",amount:0,type:"message",targetType:"all",targetConfig:{userIds:[],limit:10}},J.value=!0},Qe=a=>{Z.value=a;const t=JSON.parse(JSON.stringify(a));t.type=t.amount>0?"reward":"message",f.value=t,J.value=!0},Je=async()=>{try{const a={...f.value};a.type==="message"&&(a.amount=0),delete a.type;let t;Z.value?t=await L.put(`/campaigns/${Z.value.id}`,a):t=await L.post("/campaigns",a),await ae(),J.value=!1,alert("تم حفظ الحملة بنجاح")}catch{alert("حدث خطأ أثناء الحفظ")}},Ke=async a=>{var t;if(confirm("هل أنت متأكد من إرسال المكافآت؟ لا يمكن التراجع عن هذا الإجراء."))try{const k=await L.post(`/campaigns/${a}/send`);await ae();const C=(((t=k.data.campaign)==null?void 0:t.type)||"reward")==="reward"?"المكافآت":"الرسائل";alert(`تم إرسال ${C} بنجاح إلى ${k.data.count} مستخدم`)}catch{alert("حدث خطأ أثناء الإرسال")}},Xe=async a=>{if(confirm("هل أنت متأكد من الحذف؟"))try{await L.delete(`/campaigns/${a}`),await ae()}catch{alert("حدث خطأ أثناء الحذف")}},Ze=a=>{const t=f.value.targetConfig.userIds.indexOf(a);t===-1?f.value.targetConfig.userIds.push(a):f.value.targetConfig.userIds.splice(t,1)},_=x({ip:"Unknown",backendUrl:"",cashierUrl:"",mobileUrl:"",status:"stopped"}),B=x([]),oe=x(null),T=x(!1),ce=async()=>{if(window.electronAPI&&window.electronAPI.server)try{const a=await window.electronAPI.server.getInfo();_.value=a}catch(a){console.error("Failed to get server info",a)}},Ye=async()=>{if(window.electronAPI&&window.electronAPI.server){T.value=!0;try{const a=await window.electronAPI.server.start();a.success?_.value.status="running":alert("فشل تشغيل السيرفر: "+a.message)}catch(a){alert("حدث خطأ: "+a.message)}finally{T.value=!1,await ce()}}},et=async()=>{if(window.electronAPI&&window.electronAPI.server){if(!confirm("هل أنت متأكد من إيقاف السيرفر؟ ستتوقف جميع التطبيقات المتصلة."))return;T.value=!0;try{const a=await window.electronAPI.server.stop();a.success?_.value.status="stopped":alert("فشل إيقاف السيرفر: "+a.message)}catch(a){alert("حدث خطأ: "+a.message)}finally{T.value=!1,await ce()}}},pe=a=>{window.electronAPI&&window.electronAPI.server?window.electronAPI.server.openExternal(a):window.open(a,"_blank")},tt=()=>{B.value=[]};Y(()=>B.value.length,async()=>{await Le(),oe.value&&(oe.value.scrollTop=oe.value.scrollHeight)}),ke(async()=>{if(await U.fetchSettings(),l.value={...U.$state},await se(),await ae(),await ce(),window.electronAPI){window.electronAPI.server&&(window.electronAPI.server.onLog(a=>{B.value.push(a),B.value.length>100&&B.value.shift()}),window.electronAPI.server.onStatusChanged(a=>{_.value.status=a}));try{ue.value=await window.electronAPI.getAppVersion()}catch(a){console.error("Failed to get app version",a)}window.electronAPI.onUpdateStatus((a,t)=>{console.log("Update status:",a,t),a==="checking"&&(y.value="checking"),a==="available"&&(y.value="available",K.value=t),a==="not-available"&&(y.value="not-available"),a==="downloaded"&&(y.value="downloaded",K.value=t),a==="error"&&(y.value="error",X.value=t)}),window.electronAPI.onDownloadProgress(a=>{y.value="downloading",ee.value=Math.floor(a.percent)})}}),Se(()=>{window.electronAPI&&window.electronAPI.removeUpdateListeners&&window.electronAPI.removeUpdateListeners()}),Y(()=>[m.value,l.value.barcodeFormat,l.value.barcodeWidth,l.value.barcodeHeight,l.value.barcodeShowText,l.value.barcodeFontSize,l.value.barcodeMargin],()=>{});const st=a=>{const t=a.target.files[0];if(t){const k=new FileReader;k.onload=s=>{l.value.invoiceLogoUrl=s.target.result},k.readAsDataURL(t)}},Ce=async()=>{U.updateSettings(l.value),await U.saveSettingsToBackend(l.value),alert("تم حفظ الإعدادات بنجاح وتم تعميمها على التطبيقات")},lt=async()=>{U.updateSettings(l.value),await U.saveSettingsToBackend(l.value),alert(c("common.success"))},at=()=>{l.value={...U.$state}};return(a,t)=>{var k;return o(),r("div",ts,[e("h2",ss,n(i(c)("settings.title")),1),e("div",ls,[e("div",as,[(o(!0),r($,null,j(Ne.value,s=>(o(),r("button",{key:s.id,onClick:C=>m.value=s.id,class:P(["flex items-center gap-3 px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap",m.value===s.id?"bg-white dark:bg-gray-800 text-primary-600 dark:text-primary-400 border-r-4 border-primary-600 shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white"])},[(o(),I(dt(s.icon),{class:"w-5 h-5"})),b(" "+n(s.name),1)],10,os))),128))]),e("div",rs,[m.value==="livestream"?(o(),r("div",ns,[t[88]||(t[88]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white border-b dark:border-gray-700 pb-2 mb-4"},"إعدادات البث المباشر (المطبخ)",-1)),e("div",is,[e("div",ds,[e("div",us,[g(i(ht),{class:"w-6 h-6 text-blue-600 mt-1"}),t[79]||(t[79]=e("div",null,[e("h4",{class:"font-bold text-blue-800"},"كيف يعمل البث المباشر؟"),e("p",{class:"text-sm text-blue-700 mt-1"}," عند تفعيل البث، سيتمكن العملاء من مشاهدة تحضير طلباتهم عبر التطبيق. سيظهر شريط الانتظار للمستخدمين، وعندما يحين دورهم (يصبح الاسم باللون الأخضر)، سيتم السماح لهم بفتح الكاميرا. ")],-1))])]),e("div",ms,[e("div",cs,[t[81]||(t[81]=e("div",null,[e("label",{class:"font-medium text-gray-900 dark:text-white"},"تفعيل البث المباشر"),e("p",{class:"text-sm text-gray-500"},"السماح بمشاركة فيديو المطبخ مع العملاء")],-1)),e("div",ps,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>M.value.enabled=s),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"},null,512),[[V,M.value.enabled]]),t[80]||(t[80]=e("label",{class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1))])]),M.value.enabled?(o(),r("div",gs,[e("div",null,[t[83]||(t[83]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"اختيار الكاميرا",-1)),e("div",vs,[u(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>M.value.deviceId=s),class:"input-field flex-1"},[t[82]||(t[82]=e("option",{value:"",disabled:""},"اختر الكاميرا...",-1)),(o(!0),r($,null,j(O.value,s=>(o(),r("option",{key:s.deviceId,value:s.deviceId},n(s.label||`Camera ${s.deviceId.slice(0,5)}...`),9,xs))),128))],512),[[A,M.value.deviceId]]),e("button",{onClick:t[2]||(t[2]=(...s)=>a.refreshDevices&&a.refreshDevices(...s)),class:"p-2 bg-gray-100 rounded hover:bg-gray-200",title:"تحديث القائمة"},[g(i(F),{class:"w-5 h-5"})])])]),e("div",null,[t[85]||(t[85]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"جودة البث",-1)),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>M.value.quality=s),class:"input-field"},[...t[84]||(t[84]=[e("option",{value:"low"},"منخفضة (توفير البيانات)",-1),e("option",{value:"medium"},"متوسطة (مستحسن)",-1),e("option",{value:"high"},"عالية (تتطلب إنترنت قوي)",-1)])],512),[[A,M.value.quality]])]),e("div",ys,[t[86]||(t[86]=e("p",{class:"text-gray-500 mb-2"},"معاينة الكاميرا",-1)),e("video",{ref_key:"previewVideo",ref:H,autoplay:"",playsinline:"",muted:"",class:"max-w-full max-h-[300px] rounded bg-black"},null,512),e("button",{onClick:t[4]||(t[4]=(...s)=>a.togglePreview&&a.togglePreview(...s)),class:"mt-4 px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700"},n(D.value?"إيقاف المعاينة":"تشغيل المعاينة"),1)])])):d("",!0)]),e("div",bs,[e("button",{onClick:t[5]||(t[5]=(...s)=>a.saveStreamSettings&&a.saveStreamSettings(...s)),class:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center gap-2"},[g(i(bt),{class:"w-4 h-4"}),t[87]||(t[87]=b(" حفظ إعدادات البث ",-1))])])])])):d("",!0),m.value==="general"?(o(),r("div",fs,[e("h3",ks,n(i(c)("settings.general_section.title")),1),e("div",ws,[e("div",null,[e("label",hs,n(i(c)("settings.general_section.shop_name")),1),u(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.shopName=s),type:"text",class:"input-field"},null,512),[[p,l.value.shopName]])]),e("div",_s,[e("div",null,[e("label",Us,n(i(c)("settings.general_section.phone")),1),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>l.value.phone=s),type:"text",class:"input-field"},null,512),[[p,l.value.phone]])]),e("div",null,[e("label",Cs,n(i(c)("settings.general_section.email")),1),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.value.email=s),type:"email",class:"input-field"},null,512),[[p,l.value.email]])])]),e("div",null,[e("label",Ss,n(i(c)("settings.general_section.address")),1),u(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.value.address=s),rows:"3",class:"input-field"},null,512),[[p,l.value.address]])]),e("div",Vs,[t[93]||(t[93]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white mb-4"},"وسائل التواصل الاجتماعي",-1)),e("div",Is,[e("div",null,[t[89]||(t[89]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"فيسبوك",-1)),u(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>l.value.facebookUrl=s),type:"text",class:"input-field",placeholder:"رابط الصفحة"},null,512),[[p,l.value.facebookUrl]])]),e("div",null,[t[90]||(t[90]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"انستغرام",-1)),u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>l.value.instagramUrl=s),type:"text",class:"input-field",placeholder:"رابط الحساب"},null,512),[[p,l.value.instagramUrl]])]),e("div",null,[t[91]||(t[91]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"تيليجرام",-1)),u(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>l.value.telegramUrl=s),type:"text",class:"input-field",placeholder:"معرف القناة/الحساب"},null,512),[[p,l.value.telegramUrl]])]),e("div",null,[t[92]||(t[92]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"الموقع الإلكتروني",-1)),u(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>l.value.websiteUrl=s),type:"text",class:"input-field",placeholder:"www.example.com"},null,512),[[p,l.value.websiteUrl]])])])])])])):d("",!0),m.value==="rewards"?(o(),r("div",Ps,[t[111]||(t[111]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white border-b dark:border-gray-700 pb-2 mb-4"},"نظام المكافآت والولاء",-1)),e("div",As,[e("div",$s,[t[94]||(t[94]=e("div",null,[e("h4",{class:"text-base font-bold text-gray-900 dark:text-white"},"تفعيل نظام المكافآت"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"منح رصيد مجاني للعملاء عند تجاوز قيمة مشتريات معينة")],-1)),l.value.rewardSystem?(o(),r("div",js,[u(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>l.value.rewardSystem.active=s),type:"checkbox",id:"rewardActive",class:"toggle-checkbox"},null,512),[[V,l.value.rewardSystem.active]])])):d("",!0)]),l.value.rewardSystem&&l.value.rewardSystem.active?(o(),r("div",Ms,[e("div",Ls,[e("div",null,[t[95]||(t[95]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"الحد الأدنى للطلب (د.ع)",-1)),u(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>l.value.rewardSystem.threshold=s),type:"number",class:"input-field",placeholder:"35000"},null,512),[[p,l.value.rewardSystem.threshold,void 0,{number:!0}]]),t[96]||(t[96]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"المبلغ الذي يجب أن يتجاوزه الطلب للحصول على المكافأة",-1))]),e("div",null,[t[97]||(t[97]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"قيمة المكافأة (د.ع)",-1)),u(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>l.value.rewardSystem.amount=s),type:"number",class:"input-field",placeholder:"1000"},null,512),[[p,l.value.rewardSystem.amount,void 0,{number:!0}]]),t[98]||(t[98]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"المبلغ الذي سيتم إضافته لمحفظة العميل",-1))])]),e("div",null,[t[99]||(t[99]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"رسالة التهنئة",-1)),u(e("textarea",{"onUpdate:modelValue":t[17]||(t[17]=s=>l.value.rewardSystem.message=s),rows:"3",class:"input-field",placeholder:"نص الرسالة التي ستصل للعميل..."},null,512),[[p,l.value.rewardSystem.message]]),t[100]||(t[100]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"ستظهر هذه الرسالة للعميل عند حصوله على المكافأة",-1))]),e("div",Fs,[g(i(ie),{class:"w-5 h-5 text-blue-600 mt-0.5"}),e("div",null,[t[101]||(t[101]=e("h5",{class:"text-sm font-bold text-blue-800"},"معاينة التنبيه",-1)),e("p",zs,'"'+n(l.value.rewardSystem.message)+'"',1)])])])):d("",!0)]),e("div",Ts,[t[106]||(t[106]=e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h4",{class:"text-base font-bold text-gray-900 dark:text-white"},"هدية التسجيل (الترحيب)"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"رصيد مجاني يمنح للمستخدم الجديد عند إنشاء الحساب")])],-1)),e("div",Ds,[e("div",null,[t[102]||(t[102]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"قيمة الرصيد الترحيبي (د.ع)",-1)),u(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>l.value.welcomeBonus=s),type:"number",class:"input-field",placeholder:"3000"},null,512),[[p,l.value.welcomeBonus,void 0,{number:!0}]])]),e("div",null,[t[103]||(t[103]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"رسالة الترحيب",-1)),u(e("textarea",{"onUpdate:modelValue":t[19]||(t[19]=s=>l.value.welcomeMessage=s),rows:"3",class:"input-field",placeholder:"نص الرسالة التي ستظهر للمستخدم عند التسجيل..."},null,512),[[p,l.value.welcomeMessage]]),t[104]||(t[104]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"يمكنك استخدام {amount} لاستبدالها بقيمة الرصيد تلقائياً",-1))]),e("div",qs,[g(i(ie),{class:"w-5 h-5 text-green-600 mt-0.5"}),e("div",null,[t[105]||(t[105]=e("h5",{class:"text-sm font-bold text-green-800"},"معاينة رسالة الترحيب",-1)),e("p",Bs,'"'+n((l.value.welcomeMessage||"").replace("{amount}",(l.value.welcomeBonus||0).toLocaleString()))+'"',1)])])])]),e("div",Ns,[e("div",Os,[t[108]||(t[108]=e("div",null,[e("h4",{class:"text-base font-bold text-gray-900 dark:text-white"},"الحملات والرسائل الترويجية"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"إنشاء حملات مكافآت أو رسائل ترويجية لمجموعات محددة من المستخدمين")],-1)),e("button",{onClick:Ge,class:"btn-primary flex items-center gap-2 text-sm"},[g(i($e),{class:"w-4 h-4"}),t[107]||(t[107]=b(" حملة جديدة ",-1))])]),e("div",Hs,[le.value?(o(),r("div",Es,[e("span",Rs,n(le.value),1)])):d("",!0),(o(!0),r($,null,j(me.value,s=>(o(),r("div",{key:s.id,class:"border rounded-lg p-4 bg-gray-50 hover:bg-gray-100 transition-colors"},[e("div",Ws,[e("div",null,[e("h5",Gs,[b(n(s.title)+" ",1),s.status==="sent"?(o(),r("span",Qs,[g(i(ne),{class:"w-3 h-3"}),t[109]||(t[109]=b(" تم الإرسال ",-1))])):(o(),r("span",Js," مسودة "))]),e("p",Ks,n(s.message),1),e("div",Xs,[s.amount>0?(o(),r("span",Zs,[g(i(ie),{class:"w-3 h-3"}),b(" "+n(s.amount)+" د.ع",1)])):(o(),r("span",Ys,[g(i(Me),{class:"w-3 h-3"}),t[110]||(t[110]=b(" رسالة ترويجية",-1))])),e("span",el,[g(i(Pe),{class:"w-3 h-3"}),b(" "+n(s.targetType==="all"?"جميع المستخدمين":s.targetType==="specific"?"مستخدمين محددين":s.targetType==="most_active"?"الأكثر طلباً":"الأقل نشاطاً"),1)]),s.status==="sent"?(o(),r("span",tl,[g(i(ne),{class:"w-3 h-3"}),b(" تم الإرسال لـ "+n(s.beneficiariesCount)+" مستخدم ",1)])):d("",!0)])]),e("div",sl,[s.status!=="sent"?(o(),r("button",{key:0,onClick:C=>Qe(s),class:"text-blue-600 hover:text-blue-900 p-1",title:"تعديل"},[g(i(ve),{class:"w-4 h-4"})],8,ll)):d("",!0),s.status!=="sent"?(o(),r("button",{key:1,onClick:C=>Ke(s.id),class:"text-green-600 hover:text-green-900 p-1",title:"إرسال الآن"},[g(i(pt),{class:"w-4 h-4"})],8,al)):d("",!0),e("button",{onClick:C=>Xe(s.id),class:"text-red-600 hover:text-red-900 p-1",title:"حذف"},[g(i(xe),{class:"w-4 h-4"})],8,ol)])])]))),128)),me.value.length===0?(o(),r("div",rl," لا توجد حملات حالياً. ابدأ بإنشاء حملة جديدة! ")):d("",!0)])])])):d("",!0),m.value==="appearance"?(o(),r("div",nl,[e("h3",il,n(i(c)("settings.appearance_section.title")),1),e("div",dl,[e("div",null,[e("label",ul,n(i(c)("settings.appearance_section.language")),1),u(e("select",{"onUpdate:modelValue":t[20]||(t[20]=s=>l.value.language=s),class:"input-field"},[...t[112]||(t[112]=[e("option",{value:"ar"},"العربية",-1),e("option",{value:"en"},"English",-1),e("option",{value:"ku"},"Kurdish",-1)])],512),[[A,l.value.language]])]),e("div",null,[e("label",ml,n(i(c)("settings.appearance_section.currency")),1),e("div",cl,[u(e("select",{"onUpdate:modelValue":t[21]||(t[21]=s=>l.value.currency=s),class:"input-field"},[...t[113]||(t[113]=[e("option",{value:"IQD"},"دينار عراقي (IQD)",-1),e("option",{value:"USD"},"دولار أمريكي (USD)",-1),e("option",{value:"EUR"},"يورو (EUR)",-1)])],512),[[A,l.value.currency]]),u(e("select",{"onUpdate:modelValue":t[22]||(t[22]=s=>l.value.currencyLocale=s),class:"input-field"},[...t[114]||(t[114]=[e("option",{value:"ar-IQ"},"تنسيق عراقي (١,٠٠٠ د.ع)",-1),e("option",{value:"en-US"},"تنسيق عالمي ($1,000)",-1)])],512),[[A,l.value.currencyLocale]])])]),e("div",pl,[e("label",gl,n(i(c)("settings.appearance_section.primary_color")),1),e("div",vl,[(o(!0),r($,null,j(Ue.value,s=>(o(),r("button",{key:s.value,onClick:C=>l.value.primaryColor=s.value,class:P(["w-10 h-10 rounded-full border-2 transition-transform hover:scale-110",l.value.primaryColor===s.value?"border-gray-900 dark:border-white scale-110":"border-transparent"]),style:N({backgroundColor:s.value}),title:s.name},null,14,xl))),128))])]),e("div",yl,[e("span",bl,n(i(c)("settings.appearance_section.dark_mode")),1),e("button",{onClick:De,class:P([l.value.theme==="dark"?"bg-primary-600":"bg-gray-200","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none"])},[e("span",{class:P([l.value.theme==="dark"?"-translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],2)])])])):d("",!0),m.value==="app_users"?(o(),r("div",fl,[e("div",kl,[t[116]||(t[116]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"إدارة مستخدمين التطبيق",-1)),e("button",{onClick:se,class:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1"},[g(i(F),{class:"w-4 h-4"}),t[115]||(t[115]=b(" تحديث القائمة ",-1))])]),e("div",wl,[e("table",hl,[t[118]||(t[118]=e("thead",{class:"bg-gray-50 dark:bg-gray-900"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"المستخدم"),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"رقم الهاتف"),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"رصيد المحفظة"),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"الإجراءات")])],-1)),e("tbody",_l,[(o(!0),r($,null,j(te.value,s=>(o(),r("tr",{key:s.id},[e("td",Ul,[e("div",Cl,[e("div",Sl,[e("div",Vl,n(s.name.charAt(0)),1)]),e("div",Il,[e("div",Pl,n(s.name),1),e("div",Al,n(s.email),1)])])]),e("td",$l,n(s.phone),1),e("td",jl,n((s.walletBalance||0).toLocaleString())+" د.ع ",1),e("td",Ml,[e("div",Ll,[e("button",{onClick:C=>he(s),class:"text-blue-600 hover:text-blue-900 p-1"},[g(i(ve),{class:"w-4 h-4"})],8,Fl),e("button",{onClick:C=>_e(s.id),class:"text-red-600 hover:text-red-900 p-1"},[g(i(xe),{class:"w-4 h-4"})],8,zl)])])]))),128)),te.value.length===0?(o(),r("tr",Tl,[...t[117]||(t[117]=[e("td",{colspan:"4",class:"px-6 py-12 text-center text-gray-500"}," لا يوجد مستخدمين مسجلين حالياً ",-1)])])):d("",!0)])])])])):d("",!0),m.value==="cashier_users"?(o(),r("div",Dl,[e("div",ql,[t[120]||(t[120]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"إدارة مستخدمين الكاشير",-1)),e("button",{onClick:t[23]||(t[23]=s=>He("admin")),class:"btn-primary flex items-center gap-2 text-sm"},[g(i($e),{class:"w-4 h-4"}),t[119]||(t[119]=b(" إضافة مستخدم جديد ",-1))])]),e("div",Bl,[e("table",Nl,[t[121]||(t[121]=e("thead",{class:"bg-gray-50 dark:bg-gray-900"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"الاسم"),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"معلومات الاتصال"),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"الصلاحية"),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"الإجراءات")])],-1)),e("tbody",Ol,[(o(!0),r($,null,j(Oe.value,s=>(o(),r("tr",{key:s.id},[e("td",Hl,[e("div",El,[e("div",Rl,[e("div",Wl,n(s.name.charAt(0)),1)]),e("div",Gl,[e("div",Ql,n(s.name),1)])])]),e("td",Jl,[e("div",Kl,[e("span",null,n(s.phone),1),e("span",Xl,n(s.email),1)])]),e("td",Zl,[e("span",Yl,n(s.role==="admin"?"مدير النظام":"كاشير"),1)]),e("td",ea,[e("div",ta,[e("button",{onClick:C=>he(s),class:"text-blue-600 hover:text-blue-900 p-1"},[g(i(ve),{class:"w-4 h-4"})],8,sa),e("button",{onClick:C=>_e(s.id),class:"text-red-600 hover:text-red-900 p-1"},[g(i(xe),{class:"w-4 h-4"})],8,la)])])]))),128))])])])])):d("",!0),m.value==="invoices"?(o(),r("div",aa,[e("h3",oa,n(i(c)("settings.invoices_section.title")),1),e("div",ra,[e("div",na,[e("div",null,[e("label",ia,n(i(c)("settings.invoices_section.default_printer")),1),u(e("select",{"onUpdate:modelValue":t[24]||(t[24]=s=>l.value.printerName=s),class:"input-field"},[e("option",da,n(i(c)("settings.invoices_section.select_printer")),1),t[122]||(t[122]=e("option",{value:"printer1"},"Thermal Printer 80mm",-1)),t[123]||(t[123]=e("option",{value:"printer2"},"Microsoft Print to PDF",-1))],512),[[A,l.value.printerName]])]),e("div",null,[e("label",ua,n(i(c)("settings.invoices_section.header")),1),u(e("input",{"onUpdate:modelValue":t[25]||(t[25]=s=>l.value.invoiceHeader=s),type:"text",class:"input-field",placeholder:"نص يظهر أعلى الفاتورة"},null,512),[[p,l.value.invoiceHeader]])]),e("div",null,[e("label",ma,n(i(c)("settings.invoices_section.footer")),1),u(e("input",{"onUpdate:modelValue":t[26]||(t[26]=s=>l.value.invoiceFooter=s),type:"text",class:"input-field",placeholder:"نص يظهر أسفل الفاتورة (مثل: شكراً لزيارتكم)"},null,512),[[p,l.value.invoiceFooter]])]),e("div",ca,[t[131]||(t[131]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white"},"تصميم الفاتورة",-1)),e("div",null,[t[125]||(t[125]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"شعار الفاتورة",-1)),e("div",pa,[l.value.invoiceLogoUrl?(o(),r("div",ga,[e("img",{src:l.value.invoiceLogoUrl,class:"max-w-full max-h-full object-contain"},null,8,va)])):d("",!0),e("div",xa,[e("input",{type:"file",onChange:st,accept:"image/*",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"},null,32),t[124]||(t[124]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"يفضل استخدام صورة مربعة أو شفافة (PNG)",-1))]),l.value.invoiceLogoUrl?(o(),r("button",{key:1,onClick:t[27]||(t[27]=s=>l.value.invoiceLogoUrl=""),class:"text-red-500 hover:text-red-700 text-sm"},"حذف")):d("",!0)])]),e("div",ya,[e("div",null,[t[127]||(t[127]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"حجم الورق",-1)),u(e("select",{"onUpdate:modelValue":t[28]||(t[28]=s=>l.value.invoicePaperSize=s),class:"input-field"},[...t[126]||(t[126]=[e("option",{value:"80mm"},"طابعة حرارية 80mm",-1),e("option",{value:"58mm"},"طابعة حرارية 58mm",-1),e("option",{value:"A4"},"ورق A4",-1),e("option",{value:"A5"},"ورق A5",-1)])],512),[[A,l.value.invoicePaperSize]])]),e("div",null,[e("label",ba,"حجم الخط ("+n(l.value.invoiceFontSize)+")",1),u(e("input",{"onUpdate:modelValue":t[29]||(t[29]=s=>l.value.invoiceFontSize=s),type:"range",min:"8",max:"16",step:"1",class:"w-full"},null,512),[[p,l.value.invoiceFontSize,void 0,{number:!0}]])])]),e("div",fa,[e("div",ka,[u(e("input",{"onUpdate:modelValue":t[30]||(t[30]=s=>l.value.showLogoOnInvoice=s),type:"checkbox",id:"showLogo",class:"rounded text-primary-600 focus:ring-primary-500"},null,512),[[V,l.value.showLogoOnInvoice]]),e("label",wa,n(i(c)("settings.invoices_section.show_logo")),1)]),e("div",ha,[u(e("input",{"onUpdate:modelValue":t[31]||(t[31]=s=>l.value.showCashierName=s),type:"checkbox",id:"showCashier",class:"rounded text-primary-600 focus:ring-primary-500"},null,512),[[V,l.value.showCashierName]]),t[128]||(t[128]=e("label",{for:"showCashier",class:"text-sm text-gray-700"},"عرض اسم الكاشير",-1))]),e("div",_a,[u(e("input",{"onUpdate:modelValue":t[32]||(t[32]=s=>l.value.showCustomerInfo=s),type:"checkbox",id:"showCustomer",class:"rounded text-primary-600 focus:ring-primary-500"},null,512),[[V,l.value.showCustomerInfo]]),t[129]||(t[129]=e("label",{for:"showCustomer",class:"text-sm text-gray-700"},"عرض بيانات العميل",-1))]),e("div",Ua,[u(e("input",{"onUpdate:modelValue":t[33]||(t[33]=s=>l.value.showSocialMediaOnInvoice=s),type:"checkbox",id:"showSocials",class:"rounded text-primary-600 focus:ring-primary-500"},null,512),[[V,l.value.showSocialMediaOnInvoice]]),t[130]||(t[130]=e("label",{for:"showSocials",class:"text-sm text-gray-700"},"عرض وسائل التواصل في التذييل",-1))])])]),e("div",Ca,[e("button",Sa,n(i(c)("settings.invoices_section.print_test")),1)])]),e("div",Va,[t[132]||(t[132]=e("h4",{class:"text-sm font-bold text-gray-600 mb-6"},"معاينة حية للفاتورة",-1)),e("div",Ia,[g(Kt,{settings:l.value},null,8,["settings"])])])])])):d("",!0),m.value==="barcode"?(o(),r("div",Pa,[t[137]||(t[137]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white border-b dark:border-gray-700 pb-2 mb-4"},"إعدادات الباركود",-1)),e("div",Aa,[e("div",$a,[e("div",null,[t[134]||(t[134]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"نوع الباركود",-1)),u(e("select",{"onUpdate:modelValue":t[34]||(t[34]=s=>l.value.barcodeFormat=s),class:"input-field"},[...t[133]||(t[133]=[e("option",{value:"CODE128"},"CODE128 (افتراضي)",-1),e("option",{value:"CODE39"},"CODE39",-1),e("option",{value:"EAN13"},"EAN13",-1),e("option",{value:"UPC"},"UPC",-1)])],512),[[A,l.value.barcodeFormat]])]),e("div",null,[e("label",ja,"عرض الخط ("+n(l.value.barcodeWidth)+")",1),u(e("input",{"onUpdate:modelValue":t[35]||(t[35]=s=>l.value.barcodeWidth=s),type:"range",min:"1",max:"4",step:"1",class:"w-full"},null,512),[[p,l.value.barcodeWidth,void 0,{number:!0}]])])]),e("div",Ma,[e("div",null,[e("label",La,"الارتفاع ("+n(l.value.barcodeHeight)+")",1),u(e("input",{"onUpdate:modelValue":t[36]||(t[36]=s=>l.value.barcodeHeight=s),type:"range",min:"30",max:"150",step:"5",class:"w-full"},null,512),[[p,l.value.barcodeHeight,void 0,{number:!0}]])]),e("div",null,[e("label",Fa,"حجم الخط ("+n(l.value.barcodeFontSize)+")",1),u(e("input",{"onUpdate:modelValue":t[37]||(t[37]=s=>l.value.barcodeFontSize=s),type:"range",min:"10",max:"30",step:"1",class:"w-full"},null,512),[[p,l.value.barcodeFontSize,void 0,{number:!0}]])])]),e("div",za,[e("div",null,[e("label",Ta,"الهوامش ("+n(l.value.barcodeMargin)+")",1),u(e("input",{"onUpdate:modelValue":t[38]||(t[38]=s=>l.value.barcodeMargin=s),type:"range",min:"0",max:"50",step:"1",class:"w-full"},null,512),[[p,l.value.barcodeMargin,void 0,{number:!0}]])]),e("div",Da,[u(e("input",{"onUpdate:modelValue":t[39]||(t[39]=s=>l.value.barcodeShowText=s),type:"checkbox",id:"showText",class:"rounded text-primary-600 focus:ring-primary-500"},null,512),[[V,l.value.barcodeShowText]]),t[135]||(t[135]=e("label",{for:"showText",class:"text-sm text-gray-700"},"عرض النص تحت الباركود",-1))])]),e("div",qa,[t[136]||(t[136]=e("h4",{class:"text-sm font-medium text-gray-500 mb-4"},"معاينة الباركود",-1)),g(es,{settings:l.value,value:"1234567890"},null,8,["settings"])])])])):d("",!0),m.value==="reports"?(o(),r("div",Ba,[t[148]||(t[148]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white border-b dark:border-gray-700 pb-2 mb-4"},"إعدادات التقارير",-1)),e("div",Na,[e("div",Oa,[t[140]||(t[140]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white"},"الترويسة والتذييل",-1)),e("div",null,[t[138]||(t[138]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"عنوان التقرير",-1)),u(e("input",{"onUpdate:modelValue":t[40]||(t[40]=s=>l.value.reportHeaderTitle=s),type:"text",class:"input-field",placeholder:"مثل: تقرير المبيعات"},null,512),[[p,l.value.reportHeaderTitle]])]),e("div",null,[t[139]||(t[139]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"نص التذييل",-1)),u(e("input",{"onUpdate:modelValue":t[41]||(t[41]=s=>l.value.reportFooterText=s),type:"text",class:"input-field",placeholder:"مثل: تم استخراج التقرير من نظام..."},null,512),[[p,l.value.reportFooterText]])])]),e("div",Ha,[t[143]||(t[143]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white"},"المظهر والألوان",-1)),e("div",null,[t[141]||(t[141]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"لون التقرير الأساسي",-1)),e("div",Ea,[(o(!0),r($,null,j(Ue.value,s=>(o(),r("button",{key:s.value+"_report",onClick:C=>l.value.reportPrimaryColor=s.value,class:P(["w-8 h-8 rounded-full border-2 transition-transform hover:scale-110",l.value.reportPrimaryColor===s.value?"border-gray-900 scale-110":"border-transparent"]),style:N({backgroundColor:s.value})},null,14,Ra))),128))])]),e("div",Wa,[e("div",null,[e("label",Ga,"حجم الخط ("+n(l.value.reportFontSize)+")",1),u(e("input",{"onUpdate:modelValue":t[42]||(t[42]=s=>l.value.reportFontSize=s),type:"range",min:"10",max:"24",step:"1",class:"w-full"},null,512),[[p,l.value.reportFontSize,void 0,{number:!0}]])]),e("div",null,[t[142]||(t[142]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"لون الحدود",-1)),u(e("input",{"onUpdate:modelValue":t[43]||(t[43]=s=>l.value.reportBorderColor=s),type:"color",class:"h-10 w-full rounded border border-gray-300 p-1"},null,512),[[p,l.value.reportBorderColor]])])])]),e("div",Qa,[t[146]||(t[146]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-white"},"خيارات العرض",-1)),e("div",Ja,[e("div",Ka,[u(e("input",{"onUpdate:modelValue":t[44]||(t[44]=s=>l.value.reportShowLogo=s),type:"checkbox",id:"reportShowLogo",class:"rounded text-primary-600 focus:ring-primary-500"},null,512),[[V,l.value.reportShowLogo]]),t[144]||(t[144]=e("label",{for:"reportShowLogo",class:"text-sm text-gray-700"},"عرض الشعار في الترويسة",-1))]),e("div",Xa,[u(e("input",{"onUpdate:modelValue":t[45]||(t[45]=s=>l.value.reportShowDate=s),type:"checkbox",id:"reportShowDate",class:"rounded text-primary-600 focus:ring-primary-500"},null,512),[[V,l.value.reportShowDate]]),t[145]||(t[145]=e("label",{for:"reportShowDate",class:"text-sm text-gray-700"},"عرض تاريخ التقرير",-1))])])]),e("div",Za,[e("button",{onClick:t[46]||(t[46]=s=>w.value=!0),class:"btn-secondary w-full flex items-center justify-center gap-2"},[g(i(Ae),{class:"w-4 h-4"}),t[147]||(t[147]=b(" معاينة نموذج التقرير ",-1))])])])])):d("",!0),m.value==="updates"?(o(),r("div",Ya,[t[165]||(t[165]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white border-b dark:border-gray-700 pb-2 mb-4"},"تحديثات النظام",-1)),e("div",eo,[e("div",to,[y.value==="checking"||y.value==="downloading"?(o(),I(i(F),{key:0,class:"w-8 h-8 animate-spin"})):y.value==="available"?(o(),I(i(ye),{key:1,class:"w-8 h-8"})):y.value==="downloaded"||y.value==="not-available"?(o(),I(i(ne),{key:2,class:"w-8 h-8"})):y.value==="error"?(o(),I(i(fe),{key:3,class:"w-8 h-8 text-red-500"})):(o(),I(i(ge),{key:4,class:"w-8 h-8"}))]),e("div",null,[e("h4",so,"الإصدار الحالي: "+n(ue.value),1),y.value==="idle"?(o(),r("p",lo,"اضغط للتحقق من وجود تحديثات جديدة")):d("",!0),y.value==="checking"?(o(),r("p",ao,"جاري التحقق من التحديثات...")):d("",!0),y.value==="not-available"?(o(),r("p",oo,"برنامجك محدث لآخر إصدار")):d("",!0),y.value==="available"?(o(),r("p",ro,"يتوفر إصدار جديد "+n((k=K.value)==null?void 0:k.version),1)):d("",!0),y.value==="downloading"?(o(),r("p",no,"جاري تنزيل التحديث... "+n(ee.value)+"%",1)):d("",!0),y.value==="downloaded"?(o(),r("p",io,"تم تنزيل التحديث بنجاح")):d("",!0),y.value==="error"?(o(),r("p",uo,"حدث خطأ أثناء التحديث: "+n(X.value),1)):d("",!0)]),y.value==="downloading"?(o(),r("div",mo,[e("div",{class:"bg-primary-600 h-2.5 rounded-full",style:N({width:ee.value+"%"})},null,4)])):d("",!0),e("div",co,[y.value==="idle"||y.value==="not-available"||y.value==="error"?(o(),r("button",{key:0,onClick:we,class:"btn-primary flex items-center gap-2",disabled:y.value==="checking"},[g(i(F),{class:P(["w-4 h-4",{"animate-spin":y.value==="checking"}])},null,8,["class"]),b(" "+n(y.value==="checking"?"جاري التحقق...":"تحقق من التحديثات"),1)],8,po)):d("",!0),y.value==="available"?(o(),r("button",{key:1,onClick:qe,class:"btn-primary flex items-center gap-2"},[g(i(ye),{class:"w-4 h-4"}),t[149]||(t[149]=b(" تنزيل التحديث ",-1))])):d("",!0),y.value==="downloaded"?(o(),r("button",{key:2,onClick:Be,class:"btn-primary flex items-center gap-2"},[g(i(F),{class:"w-4 h-4"}),t[150]||(t[150]=b(" تثبيت وإعادة التشغيل ",-1))])):d("",!0)]),t[154]||(t[154]=e("p",{class:"text-xs text-gray-400 mt-4 max-w-sm"}," ملاحظة: عند التحديث، سيتم الاحتفاظ بجميع إعداداتك وبياناتك كما هي ولن تفقد أي شيء. ",-1)),e("div",go,[e("button",{onClick:t[47]||(t[47]=s=>a.showAdvancedUpdate=!a.showAdvancedUpdate),class:"text-xs text-gray-500 hover:text-primary-600 underline flex items-center gap-1 mx-auto"},[...t[151]||(t[151]=[e("span",null,"إعدادات متقدمة (رابط التحديث)",-1)])]),a.showAdvancedUpdate?(o(),r("div",vo,[t[152]||(t[152]=e("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1 text-right"},"رابط سيرفر التحديثات (Desktop Update URL)",-1)),e("div",xo,[u(e("input",{"onUpdate:modelValue":t[48]||(t[48]=s=>a.desktopUpdateUrl=s),type:"text",class:"input-field text-xs ltr",placeholder:"https://example.com/updates/"},null,512),[[p,a.desktopUpdateUrl]]),e("button",{onClick:we,class:"btn-secondary text-xs px-2 whitespace-nowrap"},"حفظ وتحقق")]),t[153]||(t[153]=e("p",{class:"text-[10px] text-gray-400 mt-1 text-right"},"اتركه فارغاً لاستخدام الرابط الافتراضي المدمج في البرنامج.",-1))])):d("",!0)])]),e("div",yo,[t[160]||(t[160]=e("h4",{class:"text-lg font-bold text-gray-900 dark:text-white border-b dark:border-gray-700 pb-2"},"إعدادات تحديث تطبيق الموبايل",-1)),e("div",bo,[e("div",null,[t[155]||(t[155]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"أحدث إصدار (Latest Version)",-1)),u(e("input",{"onUpdate:modelValue":t[49]||(t[49]=s=>l.value.latestAppVersion=s),type:"text",class:"input-field",placeholder:"1.0.0"},null,512),[[p,l.value.latestAppVersion]])]),e("div",null,[t[156]||(t[156]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"أقل إصدار مدعوم (Min Version)",-1)),u(e("input",{"onUpdate:modelValue":t[50]||(t[50]=s=>l.value.minAppVersion=s),type:"text",class:"input-field",placeholder:"1.0.0"},null,512),[[p,l.value.minAppVersion]]),t[157]||(t[157]=e("p",{class:"text-xs text-red-500 mt-1"},"الإصدارات الأقدم من هذا الرقم ستجبر على التحديث.",-1))])]),e("div",null,[t[158]||(t[158]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"رابط التحديث (Update URL)",-1)),u(e("input",{"onUpdate:modelValue":t[51]||(t[51]=s=>l.value.updateUrl=s),type:"text",class:"input-field",placeholder:"https://play.google.com/store/apps/details?id=..."},null,512),[[p,l.value.updateUrl]])]),e("div",null,[t[159]||(t[159]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"رسالة التحديث",-1)),u(e("textarea",{"onUpdate:modelValue":t[52]||(t[52]=s=>l.value.updateMessage=s),rows:"2",class:"input-field",placeholder:"نص الرسالة التي تظهر للمستخدم"},null,512),[[p,l.value.updateMessage]])]),e("div",{class:"pt-2"},[e("button",{onClick:Ce,class:"btn-secondary w-full"}," حفظ إعدادات التحديث ")])]),e("div",fo,[t[164]||(t[164]=e("h4",{class:"text-lg font-bold text-gray-900 dark:text-white border-b dark:border-gray-700 pb-2"},"النوافذ المنبثقة والإعلانات",-1)),l.value.announcement?(o(),r("div",ko,[u(e("input",{"onUpdate:modelValue":t[53]||(t[53]=s=>l.value.announcement.active=s),type:"checkbox",id:"announceActive",class:"rounded text-primary-600 focus:ring-primary-500"},null,512),[[V,l.value.announcement.active]]),t[161]||(t[161]=e("label",{for:"announceActive",class:"text-sm font-medium text-gray-900"},"تفعيل النافذة المنبثقة",-1))])):d("",!0),l.value.announcement&&l.value.announcement.active?(o(),r("div",wo,[e("div",null,[t[162]||(t[162]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"عنوان النافذة",-1)),u(e("input",{"onUpdate:modelValue":t[54]||(t[54]=s=>l.value.announcement.title=s),type:"text",class:"input-field",placeholder:"تنبيه هام"},null,512),[[p,l.value.announcement.title]])]),e("div",null,[t[163]||(t[163]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"محتوى الرسالة",-1)),u(e("textarea",{"onUpdate:modelValue":t[55]||(t[55]=s=>l.value.announcement.message=s),rows:"3",class:"input-field",placeholder:"اكتب رسالتك هنا..."},null,512),[[p,l.value.announcement.message]])])])):d("",!0),e("div",{class:"pt-2"},[e("button",{onClick:Ce,class:"btn-secondary w-full"}," حفظ إعدادات الإعلان ")])])])):d("",!0),m.value==="server"?(o(),r("div",ho,[t[185]||(t[185]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white border-b dark:border-gray-700 pb-2 mb-4"},"إدارة السيرفر والاتصال",-1)),e("div",_o,[e("h4",Uo,[g(i(be),{class:"w-5 h-5 text-primary-600"}),t[166]||(t[166]=b(" حالة السيرفر ",-1))]),e("div",Co,[e("div",So,[W.value?(o(),r("span",Vo)):d("",!0),e("span",{class:P([W.value?"bg-green-500":"bg-red-500","relative inline-flex rounded-full h-3 w-3"])},null,2)]),e("span",{class:P([W.value?"text-green-600":"text-red-600","font-bold text-lg"])},n(W.value?"متصل (Online)":"غير متصل (Offline)"),3)]),t[167]||(t[167]=it('<p class="text-sm text-gray-600 dark:text-gray-400 mb-4 bg-blue-50 dark:bg-blue-900/20 p-3 rounded border border-blue-100 dark:border-blue-800" data-v-40a87217><span class="font-bold block mb-1" data-v-40a87217>💡 ملاحظة هامة:</span> أنت تعمل بنظام الاستضافة الذاتية (Self-Hosting). هذا يعني أن هذا الحاسوب هو السيرفر الرئيسي. <br data-v-40a87217> - عند فتح البرنامج، يعمل السيرفر تلقائياً. <br data-v-40a87217> - عند إغلاق البرنامج، قد يتوقف السيرفر. <br data-v-40a87217> - يجب أن يظل هذا الحاسوب يعمل لكي يتمكن بقية الموظفين من الدخول. </p><div class="grid grid-cols-2 gap-4 mt-6 border-t pt-4" data-v-40a87217><div data-v-40a87217><span class="text-xs text-gray-500 block mb-1" data-v-40a87217>عنوان الشبكة المحلية (Local IP)</span><code class="bg-gray-100 px-2 py-1 rounded text-sm font-mono select-all" data-v-40a87217>192.168.0.106</code></div><div data-v-40a87217><span class="text-xs text-gray-500 block mb-1" data-v-40a87217>المنفذ (Port)</span><code class="bg-gray-100 px-2 py-1 rounded text-sm font-mono" data-v-40a87217>3001</code></div></div>',2))]),e("div",Io,[e("div",Po,[e("div",Ao,[e("div",$o,[e("h4",jo,[g(i(be),{class:"w-5 h-5 text-gray-500"}),t[168]||(t[168]=b(" التحكم بالسيرفر ",-1))]),e("span",{class:P(["px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",_.value.status==="running"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},[g(i(gt),{class:"w-3 h-3"}),b(" "+n(_.value.status==="running"?"يعمل حالياً":"متوقف"),1)],2)]),e("div",Mo,[_.value.status!=="running"?(o(),r("button",{key:0,onClick:Ye,disabled:T.value,class:"flex-1 btn-primary flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700"},[T.value?(o(),I(i(F),{key:1,class:"w-4 h-4 animate-spin"})):(o(),I(i(yt),{key:0,class:"w-4 h-4"})),t[169]||(t[169]=b(" تشغيل السيرفر ",-1))],8,Lo)):d("",!0),_.value.status==="running"?(o(),r("button",{key:1,onClick:et,disabled:T.value,class:"flex-1 btn-danger flex items-center justify-center gap-2"},[T.value?(o(),I(i(F),{key:1,class:"w-4 h-4 animate-spin"})):(o(),I(i(fe),{key:0,class:"w-4 h-4"})),t[170]||(t[170]=b(" إيقاف السيرفر ",-1))],8,Fo)):d("",!0)]),t[171]||(t[171]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," يجب تشغيل السيرفر لكي تعمل تطبيقات الكاشير والموبايل. تأكد من تشغيله دائماً عند بدء العمل. ",-1))]),_.value.status==="running"?(o(),r("div",zo,[e("h4",To,[g(i(_t),{class:"w-5 h-5 text-blue-500"}),t[172]||(t[172]=b(" روابط الاتصال ",-1))]),e("div",Do,[e("div",qo,[e("div",Bo,[g(i(je),{class:"w-5 h-5 text-gray-400"}),e("div",null,[t[173]||(t[173]=e("div",{class:"text-sm font-medium text-gray-900 dark:text-white"},"تطبيق الكاشير (Web)",-1)),e("div",No,n(_.value.cashierUrl),1)])]),e("button",{onClick:t[56]||(t[56]=s=>pe(_.value.cashierUrl)),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"},"فتح")]),e("div",Oo,[e("div",Ho,[g(i(je),{class:"w-5 h-5 text-gray-400"}),e("div",null,[t[174]||(t[174]=e("div",{class:"text-sm font-medium text-gray-900 dark:text-white"},"تطبيق الموبايل (API)",-1)),e("div",Eo,n(_.value.mobileUrl),1)])]),e("button",{onClick:t[57]||(t[57]=s=>pe(_.value.mobileUrl)),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"},"فتح")]),e("div",Ro,[e("div",Wo,[g(i(ge),{class:"w-5 h-5 text-gray-400"}),e("div",null,[t[175]||(t[175]=e("div",{class:"text-sm font-medium text-gray-900 dark:text-white"},"لوحة تحكم السيرفر",-1)),e("div",Go,n(_.value.backendUrl),1)])]),e("button",{onClick:t[58]||(t[58]=s=>pe(_.value.backendUrl)),class:"text-blue-600 hover:text-blue-800 text-sm font-medium"},"فتح")])])])):d("",!0),_.value.status==="running"?(o(),r("div",Qo,[e("h4",Jo,[g(i(Me),{class:"w-5 h-5 text-green-500"}),t[176]||(t[176]=b(" ربط الواتساب (الإشعارات والترويج) ",-1))]),E.value==="connected"?(o(),r("div",Ko,[e("div",Xo,[g(i(ne),{class:"w-8 h-8"})]),t[177]||(t[177]=e("h5",{class:"text-lg font-bold text-gray-900 dark:text-white mb-1"},"الواتساب متصل",-1)),t[178]||(t[178]=e("p",{class:"text-sm text-gray-500 mb-4"},"يمكنك الآن إرسال الرسائل عبر الواتساب",-1)),e("button",{onClick:Te,disabled:z.value,class:"btn-danger w-full flex items-center justify-center gap-2"},[z.value?(o(),I(i(F),{key:1,class:"w-4 h-4 animate-spin"})):(o(),I(i(fe),{key:0,class:"w-4 h-4"})),b(" "+n(z.value?"جاري الفصل...":"فصل الاتصال"),1)],8,Zo)])):E.value==="scanning"&&R.value?(o(),r("div",Yo,[t[179]||(t[179]=e("p",{class:"text-sm text-gray-600 mb-4"},"امسح الكود لربط الواتساب",-1)),e("div",er,[e("img",{src:R.value,class:"w-48 h-48 object-contain mx-auto",alt:"WhatsApp QR Code"},null,8,tr)]),t[180]||(t[180]=e("p",{class:"text-xs text-gray-400 mt-2"},"سيتم تحديث الحالة تلقائياً بعد المسح",-1))])):(o(),r("div",sr,[e("div",lr,[g(i(F),{class:"w-8 h-8 animate-spin"})]),t[181]||(t[181]=e("h5",{class:"text-lg font-bold text-gray-900 dark:text-white mb-1"},"جاري التحميل...",-1)),t[182]||(t[182]=e("p",{class:"text-sm text-gray-500 mb-4"},"يتم الآن تجهيز خدمة الواتساب",-1)),t[183]||(t[183]=e("p",{class:"text-xs text-gray-400"},"انتظر قليلاً ليتم إنشاء كود الربط...",-1))]))])):d("",!0)]),e("div",ar,[e("div",or,[e("span",rr,[g(i(wt),{class:"w-4 h-4"}),t[184]||(t[184]=b(" سجل العمليات (Logs) ",-1))]),e("button",{onClick:tt,class:"text-gray-400 hover:text-white text-xs"},"مسح السجل")]),e("div",{class:"flex-1 overflow-y-auto space-y-1 p-2",ref_key:"logsContainer",ref:oe},[(o(!0),r($,null,j(B.value,(s,C)=>(o(),r("div",{key:C,class:"break-all border-l-2 border-gray-700 pl-2"},[e("span",nr,"["+n(new Date().toLocaleTimeString())+"]",1),e("span",ir,n(s),1)]))),128)),B.value.length===0?(o(),r("div",dr," لا توجد سجلات حالياً... ")):d("",!0)],512)])])])):d("",!0),m.value==="system"?(o(),r("div",ur,[e("h3",mr,n(i(c)("settings.system_section.title")),1),e("div",cr,[e("div",pr,[e("div",null,[e("h4",gr,n(i(c)("settings.system_section.notifications")),1),e("p",vr,n(i(c)("settings.system_section.notifications_desc")),1)]),u(e("input",{"onUpdate:modelValue":t[59]||(t[59]=s=>l.value.enableNotifications=s),type:"checkbox",class:"toggle-checkbox"},null,512),[[V,l.value.enableNotifications]])]),e("div",xr,[e("div",null,[e("h4",yr,n(i(c)("settings.system_section.auto_backup")),1),e("p",br,n(i(c)("settings.system_section.auto_backup_desc")),1)]),u(e("input",{"onUpdate:modelValue":t[60]||(t[60]=s=>l.value.autoBackup=s),type:"checkbox",class:"toggle-checkbox"},null,512),[[V,l.value.autoBackup]])]),e("div",fr,[e("button",kr,n(i(c)("settings.system_section.factory_reset")),1),e("p",wr,n(i(c)("settings.system_section.factory_reset_warning")),1)])])])):d("",!0)]),e("div",hr,[e("button",{onClick:at,class:"btn-secondary"},n(i(c)("common.cancel")),1),e("button",{onClick:lt,class:"btn-primary"},n(i(c)("settings.actions.save_changes")),1)])]),G.value?(o(),r("div",_r,[e("div",Ur,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[61]||(t[61]=s=>G.value=!1)}),t[192]||(t[192]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",Cr,[e("div",Sr,[e("h3",Vr,n(Q.value?"تعديل بيانات المستخدم":"إضافة مستخدم جديد"),1),e("div",Ir,[e("div",null,[t[186]||(t[186]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"الاسم",-1)),u(e("input",{"onUpdate:modelValue":t[62]||(t[62]=s=>h.value.name=s),type:"text",class:"input-field",placeholder:"الاسم الكامل"},null,512),[[p,h.value.name]])]),e("div",Pr,[e("div",null,[t[187]||(t[187]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"رقم الهاتف",-1)),u(e("input",{"onUpdate:modelValue":t[63]||(t[63]=s=>h.value.phone=s),type:"text",class:"input-field",placeholder:"07xxxxxxxxx"},null,512),[[p,h.value.phone]])]),e("div",null,[t[188]||(t[188]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"البريد الإلكتروني",-1)),u(e("input",{"onUpdate:modelValue":t[64]||(t[64]=s=>h.value.email=s),type:"email",class:"input-field",placeholder:"example@mail.com"},null,512),[[p,h.value.email]])])]),e("div",null,[e("label",Ar,n(Q.value?"كلمة المرور (اتركها فارغة لعدم التغيير)":"كلمة المرور"),1),u(e("input",{"onUpdate:modelValue":t[65]||(t[65]=s=>h.value.password=s),type:"password",class:"input-field",placeholder:"******"},null,512),[[p,h.value.password]])]),h.value.role==="customer"?(o(),r("div",$r,[t[189]||(t[189]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"رصيد المحفظة",-1)),u(e("input",{"onUpdate:modelValue":t[66]||(t[66]=s=>h.value.walletBalance=s),type:"number",class:"input-field",placeholder:"0"},null,512),[[p,h.value.walletBalance]])])):d("",!0),h.value.role!=="customer"?(o(),r("div",jr,[t[191]||(t[191]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"الصلاحية",-1)),u(e("select",{"onUpdate:modelValue":t[67]||(t[67]=s=>h.value.role=s),class:"input-field"},[...t[190]||(t[190]=[e("option",{value:"admin"},"مدير النظام (Admin)",-1),e("option",{value:"cashier"},"كاشير (Cashier)",-1)])],512),[[A,h.value.role]])])):d("",!0)])]),e("div",Mr,[e("button",{onClick:Ee,type:"button",class:"btn-primary w-full sm:w-auto sm:mr-3 mb-3 sm:mb-0"}," حفظ "),e("button",{onClick:t[68]||(t[68]=s=>G.value=!1),type:"button",class:"btn-secondary w-full sm:w-auto"}," إلغاء ")])])])])):d("",!0),g(mt,{show:w.value,title:"معاينة نموذج التقرير",reportTitle:"تقرير مبيعات تجريبي",subtitle:"هذا نموذج لمعاينة شكل التقرير قبل الطباعة",columns:We,data:Re,summary:{total:"60,000 د.ع"},onClose:t[69]||(t[69]=s=>w.value=!1)},null,8,["show"]),J.value?(o(),r("div",Lr,[e("div",Fr,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:t[70]||(t[70]=s=>J.value=!1)}),t[203]||(t[203]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",zr,[e("div",Tr,[e("h3",Dr,n(Z.value?"تعديل الحملة":"إنشاء حملة جديدة"),1),e("div",qr,[e("div",null,[t[193]||(t[193]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"عنوان الحملة",-1)),u(e("input",{"onUpdate:modelValue":t[71]||(t[71]=s=>f.value.title=s),type:"text",class:"input-field",placeholder:"مثال: مكافأة العيد"},null,512),[[p,f.value.title]])]),e("div",null,[t[196]||(t[196]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"نوع الحملة",-1)),e("div",Br,[e("label",Nr,[u(e("input",{type:"radio","onUpdate:modelValue":t[72]||(t[72]=s=>f.value.type=s),value:"reward",class:"text-primary-600 focus:ring-primary-500"},null,512),[[Ie,f.value.type]]),t[194]||(t[194]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"مكافأة مالية",-1))]),e("label",Or,[u(e("input",{type:"radio","onUpdate:modelValue":t[73]||(t[73]=s=>f.value.type=s),value:"message",class:"text-primary-600 focus:ring-primary-500"},null,512),[[Ie,f.value.type]]),t[195]||(t[195]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"رسالة ترويجية (بدون رصيد)",-1))])])]),e("div",Hr,[f.value.type==="reward"?(o(),r("div",Er,[t[197]||(t[197]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"قيمة المكافأة (د.ع)",-1)),u(e("input",{"onUpdate:modelValue":t[74]||(t[74]=s=>f.value.amount=s),type:"number",class:"input-field",placeholder:"1000"},null,512),[[p,f.value.amount,void 0,{number:!0}]])])):d("",!0),e("div",{class:P({"col-span-2":f.value.type!=="reward"})},[t[199]||(t[199]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"الفئة المستهدفة",-1)),u(e("select",{"onUpdate:modelValue":t[75]||(t[75]=s=>f.value.targetType=s),class:"input-field"},[...t[198]||(t[198]=[e("option",{value:"all"},"جميع المستخدمين",-1),e("option",{value:"specific"},"مستخدمين محددين",-1),e("option",{value:"most_active"},"الأكثر طلباً (الأكثر نشاطاً)",-1),e("option",{value:"least_active"},"الأقل نشاطاً (الخاملين)",-1)])],512),[[A,f.value.targetType]])],2)]),e("div",null,[t[200]||(t[200]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"رسالة الإشعار",-1)),u(e("textarea",{"onUpdate:modelValue":t[76]||(t[76]=s=>f.value.message=s),rows:"3",class:"input-field",placeholder:"نص الرسالة التي ستصل للمستخدمين..."},null,512),[[p,f.value.message]])]),f.value.targetType==="specific"?(o(),r("div",Rr,[t[201]||(t[201]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"اختر المستخدمين:",-1)),(o(!0),r($,null,j(te.value,s=>(o(),r("div",{key:s.id,class:"flex items-center gap-2 mb-2"},[e("input",{type:"checkbox",value:s.id,checked:f.value.targetConfig.userIds.includes(s.id),onChange:C=>Ze(s.id),class:"rounded text-primary-600 focus:ring-primary-500"},null,40,Wr),e("span",Gr,n(s.name)+" ("+n(s.phone)+")",1)]))),128)),te.value.length===0?(o(),r("div",Qr,"لا يوجد مستخدمين")):d("",!0)])):d("",!0),["most_active","least_active"].includes(f.value.targetType)?(o(),r("div",Jr,[t[202]||(t[202]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"عدد المستخدمين",-1)),u(e("input",{"onUpdate:modelValue":t[77]||(t[77]=s=>f.value.targetConfig.limit=s),type:"number",class:"input-field",placeholder:"10"},null,512),[[p,f.value.targetConfig.limit,void 0,{number:!0}]]),e("p",Kr,"سيتم اختيار أفضل/أسوأ "+n(f.value.targetConfig.limit)+" مستخدم حسب عدد الطلبات",1)])):d("",!0)])]),e("div",Xr,[e("button",{onClick:Je,type:"button",class:"btn-primary w-full sm:w-auto sm:mr-3 mb-3 sm:mb-0"}," حفظ "),e("button",{onClick:t[78]||(t[78]=s=>J.value=!1),type:"button",class:"btn-secondary w-full sm:w-auto"}," إلغاء ")])])])])):d("",!0)])}}},vn=Fe(Zr,[["__scopeId","data-v-40a87217"]]);export{vn as default};
