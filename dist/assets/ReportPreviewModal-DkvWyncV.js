import{J as _,g as f,c as r,d,o as l,b as t,t as a,L as c,F as b,m as g,n as C,Z as j,a as S,G as m}from"./index-DUS2SrFg.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const z={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},P={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},T={class:"inline-block align-bottom bg-white rounded-lg text-right overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},U={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 border-b flex justify-between items-center no-print"},B={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},F={class:"flex gap-2"},N={class:"bg-gray-100 p-8 overflow-y-auto max-h-[80vh] flex justify-center no-print-bg"},R={class:"flex-1"},L={class:"text-gray-500 text-sm font-bold"},M={class:"mt-2 text-xs text-gray-500 space-y-1"},V={class:"flex flex-col items-end"},W={key:0,class:"w-24 h-24 bg-white rounded-lg flex items-center justify-center mb-2 overflow-hidden"},A=["src"],D={class:"mb-6"},I={key:0,class:"text-gray-500 mt-1 px-5"},E={class:"w-full mb-8"},H={class:"w-full border-collapse"},G={key:0},J={class:"bg-gray-50 font-bold"},O={class:"mt-auto"},Q={class:"grid grid-cols-2 gap-4 text-sm mb-4"},Z={class:"space-y-1"},q={class:"flex items-center gap-2"},K={class:"flex items-center gap-2"},X={key:0,class:"flex items-center gap-2"},Y={class:"space-y-1 text-left",dir:"ltr"},tt={key:0,class:"flex items-center gap-2 justify-end"},et={key:1,class:"flex items-center gap-2 justify-end"},ot={key:2,class:"flex items-center gap-2 justify-end"},st={key:3,class:"flex items-center gap-2 justify-end"},rt={class:"text-center text-xs text-gray-400 mt-2"},lt={__name:"ReportPreviewModal",props:{show:Boolean,title:String,reportTitle:String,subtitle:String,columns:Array,data:Array,summary:Object,allowReceipt:{type:Boolean,default:!1}},emits:["close","print-receipt"],setup(n,{emit:v}){const x=v,h=_(),e=f(()=>h.$state),y=()=>x("close"),w=f(()=>({width:"210mm",minHeight:"297mm",padding:"20mm",position:"relative",boxSizing:"border-box"})),k=()=>{const s=window.open("","","height=600,width=800"),o=e.logo||"/logo.png",i=o.startsWith("http")?o:`${window.location.origin}${o.startsWith("/")?"":"/"}${o}`;s.document.write("<html><head><title>طباعة التقرير</title>"),s.document.write('<script src="https://cdn.tailwindcss.com"><\/script>'),s.document.write("<style>"),s.document.write(`
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap');
    body { font-family: 'Tajawal', sans-serif; direction: rtl; }
    @page { size: A4; margin: 0; }
    @media print { 
      body { margin: 0; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      img { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    }
    .page-container { width: 210mm; min-height: 297mm; padding: 20mm; margin: 0 auto; background: white; }
  `),s.document.write("</style>"),s.document.write("</head><body>"),s.document.write(`<img src="${i}" style="display:none;" onload="this.remove()">`),s.document.write('<div class="page-container">');let u=printContent;u.includes('src="/')&&(u=u.replace(/src="\//g,`src="${window.location.origin}/`)),s.document.write(u),s.document.write("</div>"),s.document.write("</body></html>"),s.document.close(),s.onload=()=>{setTimeout(()=>{s.focus(),s.print(),s.close()},1500)}};return(s,o)=>n.show?(l(),r("div",z,[t("div",P,[t("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:y}),o[10]||(o[10]=t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),t("div",T,[t("div",U,[t("h3",B,a(n.title||"معاينة التقرير"),1),t("div",F,[n.allowReceipt?(l(),r("button",{key:0,onClick:o[0]||(o[0]=i=>s.$emit("print-receipt")),class:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:text-sm"}," طباعة وصل ")):d("",!0),t("button",{onClick:k,class:"inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none sm:text-sm"}," طباعة "),t("button",{onClick:y,class:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:text-sm"}," إغلاق ")])]),t("div",N,[t("div",{id:"print-area",class:"bg-white shadow-lg mx-auto",style:c(w.value)},[t("div",{class:"flex justify-between items-start border-b-2 pb-6 mb-6",style:c({borderColor:e.value.reportPrimaryColor})},[t("div",R,[t("h1",{class:"text-3xl font-bold mb-2",style:c({color:e.value.reportPrimaryColor})},a(e.value.reportHeaderTitle),5),t("p",L,a(e.value.shopName),1),t("div",M,[t("p",null,"رقم التقرير: #"+a(Math.floor(Math.random()*1e5)),1),t("p",null,"تاريخ الإصدار: "+a(new Date().toLocaleDateString("ar-IQ")),1)])]),t("div",V,[e.value.reportShowLogo?(l(),r("div",W,[t("img",{src:e.value.logo||"/logo.png",class:"w-full h-full object-contain",onError:o[1]||(o[1]=i=>i.target.style.display="none")},null,40,A)])):d("",!0)])],4),t("div",D,[t("h2",{class:"text-xl font-bold text-gray-800 border-r-4 px-4 py-1",style:c({borderColor:e.value.reportPrimaryColor})},a(n.reportTitle),5),n.subtitle?(l(),r("p",I,a(n.subtitle),1)):d("",!0)]),t("div",E,[t("table",H,[t("thead",null,[t("tr",{style:c({backgroundColor:e.value.reportPrimaryColor+"10"})},[(l(!0),r(b,null,g(n.columns,i=>(l(),r("th",{key:i.key,class:"p-3 text-right font-bold border-b-2",style:c({color:e.value.reportPrimaryColor,borderColor:e.value.reportPrimaryColor,fontSize:e.value.reportFontSize+"px"})},a(i.label),5))),128))],4)]),t("tbody",null,[(l(!0),r(b,null,g(n.data,(i,u)=>(l(),r("tr",{key:u,class:C(["border-b",u%2===0?"bg-white":"bg-gray-50"]),style:c({borderColor:e.value.reportBorderColor})},[(l(!0),r(b,null,g(n.columns,p=>(l(),r("td",{key:p.key,class:"p-3 text-gray-700",style:c({fontSize:e.value.reportFontSize+"px"})},[j(s.$slots,`cell-${p.key}`,{row:i,value:i[p.key]},()=>[m(a(i[p.key]),1)])],4))),128))],6))),128))]),n.summary?(l(),r("tfoot",G,[t("tr",J,[(l(!0),r(b,null,g(n.columns,i=>(l(),r("td",{key:"foot-"+i.key,class:"p-3 border-t-2 border-gray-300"},a(n.summary[i.key]||""),1))),128))])])):d("",!0)])]),t("div",O,[o[9]||(o[9]=S('<div class="grid grid-cols-2 gap-8 mb-8" data-v-0300e3c1><div class="text-center" data-v-0300e3c1><p class="text-sm font-bold mb-16" data-v-0300e3c1>توقيع المستلم</p><div class="border-b-2 w-2/3 mx-auto border-gray-300" data-v-0300e3c1></div></div><div class="text-center" data-v-0300e3c1><p class="text-sm font-bold mb-16" data-v-0300e3c1>ختم وتوقيع الإدارة</p><div class="border-b-2 w-2/3 mx-auto border-gray-300" data-v-0300e3c1></div></div></div>',1)),t("div",{class:"border-t-2 pt-4",style:c({borderColor:e.value.reportPrimaryColor})},[t("div",Q,[t("div",Z,[t("p",q,[o[2]||(o[2]=t("span",{class:"font-bold"},"العنوان:",-1)),m(" "+a(e.value.address),1)]),t("p",K,[o[3]||(o[3]=t("span",{class:"font-bold"},"الهاتف:",-1)),m(" "+a(e.value.phone),1)]),e.value.email?(l(),r("p",X,[o[4]||(o[4]=t("span",{class:"font-bold"},"البريد الإلكتروني:",-1)),m(" "+a(e.value.email),1)])):d("",!0)]),t("div",Y,[e.value.facebookUrl?(l(),r("p",tt,[m(a(e.value.facebookUrl)+" ",1),o[5]||(o[5]=t("span",{class:"font-bold"},":Facebook",-1))])):d("",!0),e.value.instagramUrl?(l(),r("p",et,[m(a(e.value.instagramUrl)+" ",1),o[6]||(o[6]=t("span",{class:"font-bold"},":Instagram",-1))])):d("",!0),e.value.telegramUrl?(l(),r("p",ot,[m(a(e.value.telegramUrl)+" ",1),o[7]||(o[7]=t("span",{class:"font-bold"},":Telegram",-1))])):d("",!0),e.value.websiteUrl?(l(),r("p",st,[m(a(e.value.websiteUrl)+" ",1),o[8]||(o[8]=t("span",{class:"font-bold"},":Web",-1))])):d("",!0)])]),t("div",rt,[t("p",null,a(e.value.reportFooterText),1)])],4)])],4)])])])])):d("",!0)}},nt=$(lt,[["__scopeId","data-v-0300e3c1"]]);export{nt as R};
